# 📝 现代化平台实施路线指南 (v4.0)

## 1. 项目目标与范围

- **核心目标**: 构建一个集**专业博客**与**社交动态**于一体的现代化平台。
- **功能边界 (MVP)**:
  - **博客模块**: 文章 CRUD、评论、点赞、按月归档、文章系列、内容置顶、Canonical
    URL。
  - **动态模块**: 用户可以发布和互动（评论、点赞、置顶、关注用户）。
  - **用户系统**: 双重认证（GitHub + 邮箱/密码）和密码重置。
  - **管理后台**: 内容审核和用户管理（角色/状态变更）。

---

## 2. 核心文档 (唯一真相来源)

📌 **关键原则**: 所有开发活动都必须严格遵守 **《架构设计文档 v4.0》** 的规定。

---

## 3. 技术选型

- **核心框架**: Next.js + React
- **后端服务**: Supabase (PostgreSQL + Auth)
- **数据访问 (ORM)**: Prisma
- **测试框架**: Vitest

---

## 4. 数据库设计

- **核心原则**: Schema First，所有模型在 `prisma/schema.prisma` 中定义。
- **关键模型**: `Follow` (关注关系), `Series` (文章系列), `Post` 和 `Activity`
  中的 `isPinned` (置顶), `Post` 中的 `canonicalUrl`。

---

## 5. 开发流程 (TDD 驱动)

1.  **环境搭建与数据库**: `pnpm install`, `docker-compose up -d`,
    `npx prisma db push`。
2.  **用户系统开发**: 实现双重认证 UI 和逻辑。
3.  **核心模块开发**:
    - **博客模块**:
      - 开发文章管理的 Server Actions 和 UI (包含系列、置顶、Canonical
        URL 的逻辑)。
      - 开发文章归档的查询逻辑和前端页面。
    - **动态模块**: 开发动态相关的 Server Actions 和 UI
      (包含置顶、关注用户逻辑)。
    - **用户管理模块**: 开发用户管理的 Server Actions 和 UI。
4.  **联调与测试**: 编写单元、组件和 E2E 测试。
5.  **后续迭代**: 开发通知系统和邮件订阅功能。

---

## 6. 部署与运维

- **平台**: Vercel + Supabase。
- **CI/CD**: 代码合并到 `main` 分支，自动部署。
- **数据分析**: 开启 Vercel Analytics。
