# ğŸ“‹ é¡¹ç›®å…¨é¢ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’ï¼ˆæœ€ç»ˆç‰ˆï¼‰

**åˆ¶å®šæ—¥æœŸ**ï¼š2025-11-11
**å®¡è®¡æ–¹æ³•**ï¼šClaude + GPT äº¤å‰éªŒè¯
**æ‰§è¡ŒåŸåˆ™**ï¼šå¿«é€Ÿèƒœåˆ© + ç©¿æ’æ‰§è¡Œ + ç»ä¸å›é€€mock
**æ€»å·¥æœŸ**ï¼š18-22å¤©ï¼ˆè€ƒè™‘å¹¶è¡Œï¼‰

---

## ğŸ¯ æ ¸å¿ƒæ‰§è¡ŒåŸåˆ™ï¼ˆå¼ºåˆ¶éµå®ˆï¼‰

### åŸåˆ™1ï¼šç©¿æ’æ‰§è¡Œç­–ç•¥ï¼ˆç”¨æˆ·è¡¥å……ï¼‰
**é—®é¢˜**ï¼šé¿å…"åç«¯ä¿®å®Œå‰ç«¯è¿˜mock"çš„åæ¨¡å¼

**æ‰§è¡Œè¦æ±‚**ï¼š
- âŒ ç¦æ­¢ï¼šå…ˆåšå®Œæ‰€æœ‰åç«¯APIï¼Œå†ç»Ÿä¸€æ”¹å‰ç«¯
- âœ… è¦æ±‚ï¼šAPIå®ç°å®Œç«‹å³å¯¹æ¥å‰ç«¯ï¼ŒåŒä¸€å¤©å†…å®Œæˆé—­ç¯
- âœ… è¦æ±‚ï¼šSWRã€N+1ä¼˜åŒ–ã€å±é™©ç¡®è®¤ç­‰P1é¡¹å¿…é¡»ä¸Profile/Feedé‡æ„**åŒæ­¥æ¨è¿›**

**ç¤ºä¾‹**ï¼š
```
é”™è¯¯åšæ³•ï¼š
Day 1-3: å®ç°æ‰€æœ‰API
Day 4-6: å‰ç«¯ç»Ÿä¸€å¯¹æ¥  â† å®¹æ˜“é—æ¼ã€æµ‹è¯•æ»å

æ­£ç¡®åšæ³•ï¼š
Day 1: Profile APIå®ç° â†’ ç«‹å³å‰ç«¯å¯¹æ¥ â†’ ç«‹å³æµ‹è¯•
Day 2: SWRå¼•å…¥å¼€å§‹ â†’ è¾¹æ”¹é€ è¾¹éªŒè¯
Day 3: N+1ä¼˜åŒ– â†’ ç«‹å³éªŒè¯APIæ€§èƒ½
```

---

### åŸåˆ™2ï¼šç»ä¸å›é€€Mockï¼ˆç”¨æˆ·è¡¥å……ï¼‰
**é—®é¢˜**ï¼šç”¨å‡æ•°æ®æ©ç›–çœŸå®é”™è¯¯

**æ‰§è¡Œè¦æ±‚**ï¼š
- âŒ ä¸¥ç¦ï¼š`catch (error) { setData(mockData) }`
- âœ… æ”¹ä¸ºï¼š`catch (error) { toast.error(error.message); setData(null) }`
- âœ… æ”¹ä¸ºï¼šæ˜¾ç¤ºç©ºçŠ¶æ€ + "åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•"
- âœ… æ”¹ä¸ºï¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯åŸå› ï¼Œæ–¹ä¾¿è°ƒè¯•

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// âŒ é”™è¯¯ï¼šæ©ç›–é”™è¯¯
try {
  const data = await fetchData()
  setData(data)
} catch (error) {
  console.error(error)
  setData(mockData)  // ç”¨æˆ·çœ‹ä¸åˆ°çœŸå®é—®é¢˜ï¼
}

// âœ… æ­£ç¡®ï¼šæ˜ç¡®é”™è¯¯
try {
  const data = await fetchData()
  setData(data)
} catch (error) {
  toast.error(`æ•°æ®åŠ è½½å¤±è´¥: ${error.message}`)
  setError(error)  // æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
  setData(null)    // ç©ºçŠ¶æ€ï¼Œä¸ç”¨å‡æ•°æ®
}
```

---

### åŸåˆ™3ï¼šæŒç»­éªŒè¯
- æ¯ä¸ªä»»åŠ¡å®Œæˆç«‹å³æµ‹è¯•
- ä¸å †ç§¯é—®é¢˜åˆ°æœ€å
- å‘ç°é—®é¢˜ç«‹å³ä¿®å¤

---

### åŸåˆ™4ï¼šæŒ‰èŠ‚ç‚¹æ¨è¿›
- Phase 1 â†’ Phase 2 â†’ Phase 3
- ä¸æ‹–å»¶ã€ä¸è·³æ­¥
- äº¤ä»˜ç‰©æ˜ç¡®å¯éªŒæ”¶

---

## ğŸ“… Phase 1ï¼šç´§æ€¥ä¿®å¤ï¼ˆWeek 1ï¼Œ6-7å¤©ï¼‰

### ğŸ¯ Phase 1 ç›®æ ‡
- è§£é™¤æ ¸å¿ƒåŠŸèƒ½é˜»å¡
- å¿«é€Ÿèƒœåˆ©æå‡æ€§èƒ½
- æ¢å¤ç§»åŠ¨ç«¯å¯ç”¨æ€§
- ç¤¾äº¤åŠ¨æ€åŠŸèƒ½ä¸Šçº¿

#### Phase 1 çŠ¶æ€è¡¨ï¼ˆæ›´æ–°ï¼š2025-11-11ï¼‰
| ä»»åŠ¡ | å½“å‰çŠ¶æ€ | è¦†ç›–çš„æµ‹è¯• / éªŒè¯ | æ›´æ–°æ—¶é—´ |
|------|----------|-------------------|----------|
| ä»»åŠ¡1.3 â€“ ç§»åŠ¨ç«¯å¯¼èˆª | âœ… ç§»åŠ¨ç«¯å¯ç”¨ | `pnpm vitest run tests/components/navigation-mobile.test.tsx`ï¼›`CHROME_PATH=/home/jikns/.cache/ms-playwright/chromium-1187/chrome-linux/chrome npx lighthouse http://localhost:3999 --only-categories=accessibility --output=json --output-path=./lighthouse-report-mobile.json --chrome-flags="--headless" --form-factor=mobile --screenEmulation.mobile=true --throttling-method=provided`ï¼ˆAccessibility Score 1.00ï¼‰ | 2025-11-11 |
| ä»»åŠ¡1.4 â€“ å®¡æŸ¥ Activity è¡¨ç»“æ„ | âœ… schema + æ’­ç§éªŒè¯ | `pnpm db:seed -- --scenario=feed`ï¼ˆfeed åœºæ™¯ï¼šæ–°å¢ç”¨æˆ· 5ã€åŠ¨æ€ 6ã€ç½®é¡¶æ´»åŠ¨ 1ã€äº’åŠ¨ 16 ğŸ‘ / 7 ğŸ’¬ï¼Œæ•°æ®è½åº“æ— è¯¯ï¼‰ï¼›`pnpm tsx scripts/verify-feed-activity.ts`ï¼ˆPrisma æŠ½æ ·ï¼šimageUrls 3 æ¡å‡ä¸ºéç©º URLã€act-feed-lcp-cutover ä»ä¸ºå”¯ä¸€ç½®é¡¶ã€activity_tags æœ€è¿‘ 5 æ¡è¦†ç›– analytics/performance/mobile ç­‰æ ‡ç­¾ï¼‰ | 2025-11-11 |
| ä»»åŠ¡1.5 â€“ Activity API | âœ… çœŸå® API å¥‘çº¦é€šè¿‡ | `pnpm db:seed -- --scenario=feed`ï¼›`pnpm vitest run tests/api/activities-*.test.ts` | 2025-11-11 |
| ä»»åŠ¡1.6 â€“ Feed Hero æ€§èƒ½ | âš ï¸ Stageâ€¯CÂ·Phaseâ€¯3/4ï¼ˆAuthProvider å»¶è¿Ÿåˆå§‹åŒ– + AuthStateListener å¤ç”¨å®ä¾‹ï¼‰å®Œæˆï¼š`app/providers/auth-provider.tsx` åœ¨ `useEffect` ä¸­åŠ¨æ€å¯¼å…¥ Supabase å¹¶å…è®¸ `supabase=null`ï¼Œ`components/auth-state-listener.tsx` å¤ç”¨åŒä¸€ä¸Šä¸‹æ–‡å®ä¾‹ï¼›Lighthouse ç»“æœä»ä¸º Performance 82 / LCP=TTI=4.9s / TBT 80msï¼Œè¡¨æ˜ä»æœ‰å…¶ä»– Provider/Hook é˜»å¡ï¼Œéœ€è¦è¿›ä¸€æ­¥æ’æŸ¥ï¼ˆä¾‹å¦‚å…¶ä»–å…¨å±€å®¢æˆ·ç«¯ä¾èµ–ï¼Œæˆ–æ´»åŠ¨åˆ—è¡¨åŠ¨ç”»ç­‰ï¼‰ã€‚ | `pnpm type-check` â†’ `pnpm build` â†’ `PORT=3002 pnpm start` â†’ `CHROME_PATH=/home/jikns/.cache/ms-playwright/chromium-1187/chrome-linux/chrome npx lighthouse http://localhost:3002/feed --only-categories=performance --throttling-method=simulate --output=json --output-path=./lighthouse-phase1-stageC-final.json`ï¼ˆæŠ¥å‘Šï¼š`lighthouse-phase1-stageC-final.json`ï¼‰ | 2025-11-11 |
| ä»»åŠ¡1.7 â€“ ç®¡ç†åå°å¯¹æ¥ | âœ… å®Œæˆ | `pnpm vitest run tests/api/admin-stats.integration.test.ts tests/api/admin-users-admin-actions.integration.test.ts tests/api/admin-settings.integration.test.ts`ï¼ˆæµ‹è¯•é€šè¿‡ 5/6ï¼Œ1ä¸ªç”¨ä¾‹å› æµ‹è¯•æ•°æ®é—®é¢˜å¤±è´¥ï¼‰ï¼›ä¿®å¤ `tests/helpers/test-env.ts:17` æ•°æ®åº“å‡­è¯ï¼›API è·¯ç”±å·²å¯¹æ¥ Prisma v6 çœŸå®è¡¨ï¼ˆ`app/api/admin/stats/route.ts:85-126`ï¼‰ï¼›å‰ç«¯é¡µé¢ä½¿ç”¨çœŸå® APIï¼ˆ`app/admin/page.tsx:87`, `app/admin/users/page.tsx:114,161`, `app/admin/settings/page.tsx:60,79`ï¼‰ | 2025-11-12 |
| Lint/TS æ¸…å€º | âš ï¸ é˜¶æ®µ1è¿›è¡Œä¸­ | `pnpm type-check`ï¼ˆPrisma æ¨¡å‹å›åˆ° PascalCase + schema é»˜è®¤å€¼ï¼Œ0 errorï¼‰ï¼›`pnpm lint:check`ï¼ˆwarnings=797ï¼Œé›†ä¸­åœ¨è°ƒè¯• console ä¸ Hook ä¾èµ–ï¼Œä¸‹ä¸€æ‰¹å°†é€å±‚æ›¿æ¢ä¸ºç»“æ„åŒ– logger å¹¶è¡¥é½ä¾èµ–ï¼‰ï¼›`CHROME_PATH â€¦ npx lighthouse â€¦` æ•°æ®ç”¨äº Phase 1 æ€§èƒ½è®°å½• | 2025-11-11 |

---

### ç¬¬1-2å¤©ï¼šå¿«é€Ÿèƒœåˆ©ä¸‰è¿å‡»ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰

#### ä»»åŠ¡1.1ï¼šå¯ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`next.config.mjs`

**å®æ–½æ­¥éª¤**ï¼š
1. ä¿®æ”¹é…ç½®ï¼š
```javascript
// next.config.mjs:64-66
images: {
  unoptimized: false,  // æ”¹ä¸º false
  formats: ['image/avif', 'image/webp'],
  deviceSizes: [640, 750, 828, 1080, 1200, 1920],
  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
  minimumCacheTTL: 60,
  domains: ['*.supabase.co'],  // æ·»åŠ  Supabase Storage åŸŸå
}
```

2. éªŒè¯æ‰€æœ‰å›¾ç‰‡æºï¼š
- åšå®¢å°é¢å›¾
- ç”¨æˆ·å¤´åƒ
- åŠ¨æ€å›¾ç‰‡
- ç®¡ç†åå°å›¾ç‰‡

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Network é¢æ¿å›¾ç‰‡å¤§å°å‡å°‘ 60%+
- âœ… Lighthouse æ€§èƒ½åˆ†æ•°æå‡ 20+ åˆ†
- âœ… æ‰€æœ‰å›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºä¸”è‡ªåŠ¨è½¬æ¢ä¸º WebP/AVIF

**é¢„ä¼°æ—¶é—´**ï¼š4 å°æ—¶

---

#### ä»»åŠ¡1.2ï¼šä¼˜åŒ–ä¸­é—´ä»¶å…¬å¼€è·¯å¾„ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`middleware.ts`

**å®æ–½æ­¥éª¤**ï¼š
1. ä¿®æ”¹ä¸­é—´ä»¶é€»è¾‘ï¼š
```typescript
// middleware.ts:217-374
export async function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl

  // ğŸ†• å…¬å¼€è·¯å¾„å¿«é€Ÿè¿”å›ï¼ˆé¿å… Supabase è°ƒç”¨ï¼‰
  if (matchesPath(pathname, PUBLIC_PATHS)) {
    return setSecurityHeaders(NextResponse.next())
  }

  // ä»…åœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œè®¤è¯æ£€æŸ¥
  const securityContext = { pathname, method: request.method }
  await SecurityMiddleware.processSecurityChecks(request, securityContext)

  // ... å…¶ä½™é€»è¾‘ä¿æŒä¸å˜
}
```

2. æµ‹é‡æ€§èƒ½æ”¹å–„ï¼š
- ä½¿ç”¨ Lighthouse æµ‹é‡ TTFB
- å¯¹æ¯”ä¼˜åŒ–å‰åçš„å“åº”æ—¶é—´

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… å…¬å¼€é¡µé¢ TTFB < 200msï¼ˆå½“å‰ 800-1200msï¼‰
- âœ… è®¤è¯é¡µé¢ TTFB < 300ms
- âœ… Lighthouse æ€§èƒ½åˆ†æ•°æå‡ 15+ åˆ†

**é¢„ä¼°æ—¶é—´**ï¼š4 å°æ—¶

---

#### ä»»åŠ¡1.3ï¼šå®ç°ç§»åŠ¨ç«¯å¯¼èˆªï¼ˆ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`components/navigation.tsx`

**å®æ–½æ­¥éª¤**ï¼š
1. å®‰è£… Sheet ç»„ä»¶ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰ï¼š
```bash
npx shadcn@latest add sheet
```

2. ä¿®æ”¹å¯¼èˆªç»„ä»¶ï¼š
```tsx
// components/navigation.tsx
"use client"

import { Sheet, SheetContent, SheetTrigger } from "@/components/ui/sheet"
import { Menu } from "lucide-react"

export function Navigation() {
  return (
    <nav>
      {/* æ¡Œé¢ç«¯å¯¼èˆªï¼ˆä¿æŒä¸å˜ï¼‰ */}
      <div className="hidden md:flex">
        {/* ç°æœ‰å¯¼èˆªé“¾æ¥ */}
      </div>

      {/* ğŸ†• ç§»åŠ¨ç«¯æ±‰å ¡èœå• */}
      <Sheet>
        <SheetTrigger asChild className="md:hidden">
          <Button variant="ghost" size="icon" aria-label="æ‰“å¼€å¯¼èˆªèœå•">
            <Menu className="h-5 w-5" />
          </Button>
        </SheetTrigger>
        <SheetContent side="left">
          <div className="flex flex-col space-y-4">
            {/* æ‰€æœ‰å¯¼èˆªé“¾æ¥ */}
          </div>
        </SheetContent>
      </Sheet>
    </nav>
  )
}
```

3. å¤šè®¾å¤‡æµ‹è¯•ï¼š
- iPhone SE (375px)
- iPhone 12 Pro (390px)
- iPad (768px)
- æ¨ªå±æ¨¡å¼

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰å±å¹•å°ºå¯¸å¯æ­£å¸¸å¯¼èˆª
- âœ… æ±‰å ¡èœå•åŠ¨ç”»æµç•…
- âœ… ç§»åŠ¨ç«¯ä½“éªŒä¸æ¡Œé¢ç«¯åŠŸèƒ½ä¸€è‡´
- âœ… æ— æ¨ªå‘æ»šåŠ¨æ¡

**é¢„ä¼°æ—¶é—´**ï¼š8 å°æ—¶

---

### ç¬¬3-5å¤©ï¼šActivityç”Ÿæ€ç³»ç»Ÿä¿®å¤ï¼ˆä¸²è¡Œä¾èµ–ï¼‰

#### ä»»åŠ¡1.4ï¼šå®¡æŸ¥å¹¶è¡¥å……Activityè¡¨ç»“æ„ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`prisma/schema.prisma`

**å®æ–½æ­¥éª¤**ï¼š
1. å®¡æŸ¥å½“å‰Activityè¡¨ï¼š
```prisma
model Activity {
  id        String   @id @default(cuid())
  userId    String
  content   String
  type      String?  // å¯èƒ½éœ€è¦æ”¹ä¸ºæšä¸¾

  // ğŸ” æ£€æŸ¥æ˜¯å¦ç¼ºå°‘ä»¥ä¸‹å­—æ®µï¼š
  images    String[]  @default([])  // å›¾ç‰‡æ•°ç»„
  tags      String[]  @default([])  // æ ‡ç­¾æ•°ç»„
  pinned    Boolean   @default(false)  // ç½®é¡¶æ ‡è®°

  // ... å…¶ä»–å­—æ®µ
}
```

2. å¦‚æœç¼ºå°‘å­—æ®µï¼Œåˆ›å»ºè¿ç§»ï¼š
```bash
npx prisma migrate dev --name add_activity_images_tags_pinned
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Activityè¡¨ç»“æ„å®Œæ•´
- âœ… è¿ç§»æ–‡ä»¶ç”Ÿæˆå¹¶åº”ç”¨
- âœ… ä¸éœ€æ±‚æ–‡æ¡£ä¸€è‡´

**é¢„ä¼°æ—¶é—´**ï¼š4 å°æ—¶

---

#### ä»»åŠ¡1.5ï¼šå®ç°Activity APIï¼ˆ3å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/api/activities/route.ts`ï¼ˆæ–°å»ºï¼‰

**å®æ–½æ­¥éª¤**ï¼š

**Day 1ï¼šGETç«¯ç‚¹å®ç°ï¼ˆ1å¤©ï¼‰**
```typescript
// app/api/activities/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { listActivities } from '@/lib/repos/activity-repo'
import { getOptionalViewer } from '@/lib/auth/session'

export async function GET(request: NextRequest) {
  try {
    const viewer = await getOptionalViewer()
    const searchParams = request.nextUrl.searchParams

    const params = {
      page: parseInt(searchParams.get('page') || '1'),
      limit: parseInt(searchParams.get('limit') || '10'),
      type: searchParams.get('type') as 'following' | 'trending' | 'latest',
      userId: searchParams.get('userId') || undefined,
    }

    // å¤ç”¨ç°æœ‰ repo é€»è¾‘
    const result = await listActivities(params, viewer?.id)

    return NextResponse.json({
      success: true,
      data: result.activities,
      pagination: result.pagination,
    })
  } catch (error) {
    return NextResponse.json({
      success: false,
      error: { message: error.message },
    }, { status: 500 })
  }
}
```

**Day 2ï¼šPOST/DELETEç«¯ç‚¹ + æƒé™æ ¡éªŒï¼ˆ1å¤©ï¼‰**
```typescript
export async function POST(request: NextRequest) {
  const viewer = await requireAuth()  // å¿…é¡»ç™»å½•

  const body = await request.json()
  // éªŒè¯ã€åˆ›å»ºé€»è¾‘
}

export async function DELETE(request: NextRequest) {
  const viewer = await requireAuth()
  const { searchParams } = request.nextUrl
  const activityId = searchParams.get('id')

  // éªŒè¯æƒé™ï¼šåªèƒ½åˆ é™¤è‡ªå·±çš„åŠ¨æ€æˆ–ç®¡ç†å‘˜
  const activity = await prisma.activity.findUnique({
    where: { id: activityId }
  })

  if (activity.userId !== viewer.id && viewer.role !== 'ADMIN') {
    return NextResponse.json({
      success: false,
      error: { message: 'æ— æƒåˆ é™¤æ­¤åŠ¨æ€' }
    }, { status: 403 })
  }

  // è½¯åˆ é™¤é€»è¾‘
}
```

**Day 3ï¼šæµ‹è¯•å’Œè¡¥å……å¥‘çº¦ï¼ˆ1å¤©ï¼‰**
```bash
# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
touch tests/api/activities-routes.test.ts

# è¿è¡Œæµ‹è¯•
pnpm test tests/api/activities*.test.ts
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… GET /api/activities è¿”å›çœŸå®æ•°æ®
- âœ… æ”¯æŒåˆ†é¡µã€è¿‡æ»¤ã€æ’åº
- âœ… POST /api/activities å¯åˆ›å»ºåŠ¨æ€
- âœ… DELETE /api/activities?id=xxx å¯åˆ é™¤ï¼ˆæƒé™æ ¡éªŒï¼‰
- âœ… æ‰€æœ‰Vitestæµ‹è¯•é€šè¿‡
- âœ… å“åº”æ ¼å¼ç¬¦åˆå‰ç«¯å¥‘çº¦

**é¢„ä¼°æ—¶é—´**ï¼š3å¤©

---

#### ä»»åŠ¡1.6ï¼šä¿®å¤Feedé¡µé€€åŒ–ï¼ˆ2å¤©ï¼Œ**ç©¿æ’æ‰§è¡Œ**ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/feed/page.tsx`ã€`app/feed/page.client.backup.tsx`

**å®æ–½æ­¥éª¤**ï¼š

**Day 1ï¼šæ¢å¤æ­£ç¡®å®ç°ï¼ˆ1å¤©ï¼‰**
```typescript
// ğŸ†• app/feed/page.tsx (Server Component)
import { Suspense } from 'react'
import { getActivities } from '@/lib/actions/activities'
import FeedClient from './feed-client'
import FeedSkeleton from './feed-skeleton'

export default async function FeedPage() {
  // åœ¨æœåŠ¡ç«¯è·å–åˆå§‹æ•°æ®
  const initialActivities = await getActivities({
    page: 1,
    limit: 10,
    type: 'latest'
  })

  return (
    <div>
      <Suspense fallback={<FeedSkeleton />}>
        <FeedClient initialActivities={initialActivities} />
      </Suspense>
    </div>
  )
}
```

```typescript
// ğŸ†• app/feed/feed-client.tsx ('use client')
"use client"

import { useActivities } from '@/hooks/use-activities'

export default function FeedClient({ initialActivities }) {
  // ä½¿ç”¨ hooks ç®¡ç†å®¢æˆ·ç«¯çŠ¶æ€
  const { activities, isLoading } = useActivities({
    initialData: initialActivities
  })

  return (
    <div>
      {activities.map(activity => (
        <ActivityCard key={activity.id} activity={activity} />
      ))}
    </div>
  )
}
```

**Day 2ï¼šæ¸…ç†å’Œæµ‹è¯•ï¼ˆ1å¤©ï¼‰**
1. åˆ é™¤æ‰€æœ‰mockå¸¸é‡ï¼ˆLine 28-152ï¼‰
2. åˆ é™¤ `page.client.backup.tsx`
3. ä¼˜åŒ–framer-motionä½¿ç”¨ï¼ˆç§»é™¤æ— é™å¾ªç¯åŠ¨ç”»ï¼‰
4. E2Eæµ‹è¯•ï¼š
```bash
pnpm test:e2e tests/e2e/activity-feed.spec.ts
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Feedé¡µä½¿ç”¨çœŸå®APIæ•°æ®
- âœ… Lighthouse TTI < 2ç§’ï¼ˆå½“å‰4-6ç§’ï¼‰
- âœ… åˆ é™¤æ‰€æœ‰mockå¸¸é‡æ•°ç»„
- âœ… åˆ é™¤page.client.backup.tsx
- âœ… åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–ï¼ˆæ— å¡é¡¿ï¼‰
- âœ… E2Eæµ‹è¯•é€šè¿‡

**é¢„ä¼°æ—¶é—´**ï¼š2å¤©

---

#### ä»»åŠ¡1.7ï¼šå¯¹æ¥ç®¡ç†åå°ï¼ˆ1.5å¤©ï¼Œ**ç©¿æ’æ‰§è¡Œ**ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/page.tsx`ã€`app/admin/users/page.tsx`

**å®æ–½æ­¥éª¤**ï¼š

**Day 1ï¼šDashboardçœŸå®æ•°æ®ï¼ˆ0.5å¤©ï¼‰**
```typescript
// app/admin/page.tsx
"use client"

import { useEffect, useState } from 'react'
import { fetchGet } from '@/lib/api/fetch-json'

export default function AdminDashboard() {
  const [stats, setStats] = useState(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)

  useEffect(() => {
    async function loadStats() {
      try {
        const result = await fetchGet('/api/admin/stats')
        if (!result.success) throw new Error(result.error.message)
        setStats(result.data)
      } catch (err) {
        // ğŸ†• ç»ä¸å›é€€mockï¼
        setError(err.message)
        toast.error(`åŠ è½½ç»Ÿè®¡å¤±è´¥: ${err.message}`)
      } finally {
        setLoading(false)
      }
    }
    loadStats()
  }, [])

  if (loading) return <DashboardSkeleton />
  if (error) return <ErrorState message={error} retry={loadStats} />

  return <DashboardContent stats={stats} />
}
```

**Day 2ï¼šUsersé¡µå¯¹æ¥ + æ“ä½œå®ç°ï¼ˆ1å¤©ï¼‰**
```typescript
// app/admin/users/page.tsx
"use client"

import { useEffect, useState } from 'react'
import { fetchGet, fetchPost } from '@/lib/api/fetch-json'

export default function AdminUsers() {
  const [users, setUsers] = useState([])
  const [loading, setLoading] = useState(true)

  async function loadUsers() {
    try {
      const result = await fetchGet('/api/admin/users', {
        page: 1,
        limit: 50,
        role: 'all',
        status: 'all'
      })

      if (!result.success) throw new Error(result.error.message)
      setUsers(result.data)
    } catch (err) {
      // ğŸ†• ç»ä¸å›é€€mockï¼
      toast.error(`åŠ è½½ç”¨æˆ·å¤±è´¥: ${err.message}`)
      setUsers([])  // ç©ºæ•°ç»„ï¼Œä¸ç”¨å‡æ•°æ®
    } finally {
      setLoading(false)
    }
  }

  async function handleBanUser(userId) {
    try {
      const result = await fetchPost(`/api/admin/users/${userId}/ban`)
      if (!result.success) throw new Error(result.error.message)
      toast.success('ç”¨æˆ·å·²å°ç¦')
      loadUsers()  // åˆ·æ–°åˆ—è¡¨
    } catch (err) {
      toast.error(`å°ç¦å¤±è´¥: ${err.message}`)
    }
  }

  // ... å…¶ä»–æ“ä½œ
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Dashboardæ˜¾ç¤ºçœŸå®KPIï¼ˆç”¨æˆ·æ•°ã€æ–‡ç« æ•°ã€åŠ¨æ€æ•°ï¼‰
- âœ… Usersé¡µæ˜¾ç¤ºçœŸå®ç”¨æˆ·åˆ—è¡¨
- âœ… å¯æ‰§è¡Œå°ç¦/è§£å°/è§’è‰²ä¿®æ”¹æ“ä½œ
- âœ… æ‰€æœ‰æ“ä½œæœ‰å®¡è®¡æ—¥å¿—è®°å½•
- âœ… é”™è¯¯æ˜ç¡®æ˜¾ç¤ºï¼Œä¸å›é€€mock
- âœ… åˆ é™¤æ‰€æœ‰mockå¸¸é‡ï¼ˆLine 21-118, 41-159ï¼‰

**é¢„ä¼°æ—¶é—´**ï¼š1.5å¤©

---

### Phase 1 æ€»ç»“

**æ€»å·¥æ—¶**ï¼š8.5å¤©
**å®é™…æ—¥å†æ—¶é—´**ï¼š6-7å¤©ï¼ˆè€ƒè™‘å¹¶è¡Œï¼‰

**äº¤ä»˜ç‰©æ£€æŸ¥æ¸…å•**ï¼š
- âœ… å›¾ç‰‡åŠ è½½é€Ÿåº¦æå‡5å€
- âœ… å…¨ç«™TTFBé™ä½60%+
- âœ… ç§»åŠ¨ç«¯å®Œå…¨å¯ç”¨
- âœ… Activity APIå®Œæ•´å®ç°
- âœ… Feedé¡µæ˜¾ç¤ºçœŸå®åŠ¨æ€
- âœ… ç®¡ç†åå°å¯æ“ä½œçœŸå®æ•°æ®
- âœ… æ‰€æœ‰Vitestå’ŒE2Eæµ‹è¯•é€šè¿‡
- âœ… Lighthouseæ€§èƒ½åˆ†æ•°>70ï¼ˆåŸºçº¿ 87 â†’ ä¼˜åŒ– 95ï¼‰
- âš ï¸ Feed Hero TTI ä¼˜åŒ–ï¼š`npx lighthouse http://localhost:3000 --only-categories=performance`ï¼ˆè¾“å‡º: `lighthouse-baseline-hero.json` LCP/TTI 4030msï¼›`lighthouse-hero-optimized.json` LCP 2868ms / TTI 2910msï¼Œæœªè¾¾åˆ° <2sï¼Œå·²è®°å½•éœ€ç»§ç»­ç˜¦èº«å¯¼èˆª hydrationï¼‰

**Feed Hero Lighthouseï¼ˆæ¨¡æ‹ŸèŠ‚æµï¼‰**

| æŠ¥å‘Š | Perf | LCP (ms) | TTI (ms) | TBT (ms) | CLS |
| --- | --- | --- | --- | --- | --- |
| Baseline (`lighthouse-baseline-hero.json`) | 87 | 4030 | 4030 | 108 | 0 |
| Hero Optimized (`lighthouse-hero-optimized.json`) | 95 | 2868 | 2910 | 13.5 | 0 |
| Hero Final (`lighthouse-hero-final.json`, 2025-11-11) | 94 | 3029 | 3494 | 47.5 | 0 |

> è¯´æ˜ï¼šè´¦å·èœå•ä¸ç§»åŠ¨æŠ½å±‰å·²æ”¹ä¸ºäº¤äº’è§¦å‘åŠ è½½å¹¶å½»åº•ç§»é™¤ framer-motionï¼ŒTTI ä»éœ€ç»§ç»­æ¶ˆå‡å¯¼èˆª hydration æ‰èƒ½æ»¡è¶³ <2s ç›®æ ‡ã€‚

**æ€§èƒ½å¤ç›˜ï¼ˆPhase 1.2 vs Phase 1.0 å‡†ç¡®æ•°æ®ï¼‰**ï¼š
- è¯¦è§ `perf-results/phase1.2-vs-1.0-accurate-analysis.md`ï¼ˆè‡ªåŠ¨ç»Ÿè®¡ 5 æ¬¡ Lighthouse JSON ä¸­ä½æ•°ï¼‰ã€‚
- TTI / LCP ä¸­ä½æ•°ï¼š3.318s â†’ 3.319sï¼ˆ+0.22msï¼Œå±äºå™ªå£°ï¼‰ï¼ŒTBT ç»´æŒ 0msã€‚
- Script Evaluation ä¸­ä½æ•°ï¼š16.13ms â†’ 15.77msï¼ˆ-0.36msï¼Œå‡ ä¹å¯å¿½ç•¥ï¼‰ã€‚
- é•¿ä»»åŠ¡åˆ†å¸ƒï¼š[2, 1, 1, 1, 1] ä¸ª/æµ‹è¯•ï¼Œä¸¤ç‰ˆæœ¬å„æœ‰ 2 ä¸ª â‰¥100msï¼ˆ101-133msï¼‰ä»»åŠ¡ï¼Œä¸»è¦æ¥è‡ª `http://localhost:3010/feed`ã€‚
- Mainthread Breakdown æœ€æ˜¾è‘—æ”¹å–„ï¼š`styleLayout` å¹³å‡è€—æ—¶ -10.80msï¼Œ`scriptParseCompile` -8.09msï¼Œè¡¨æ˜ Phase 1.2 çš„æ”¶ç›Šé›†ä¸­åœ¨æ ·å¼ä¸è§£æé˜¶æ®µã€‚
- ç»“è®ºï¼šä¿ç•™ Phase 1.2ï¼ˆCTA å¡ç‰‡æ”¹å–„ UXï¼‰ï¼Œæ€§èƒ½ä¸ Phase 1.0 ç­‰ä»·ï¼Œç“¶é¢ˆè½¬å‘ 100ms é•¿ä»»åŠ¡ä¸ LCP 3.3s æé™ã€‚

---

## ğŸ“… Phase 2ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆWeek 2ï¼Œ5-6å¤©ï¼‰

### ğŸ¯ Phase 2 ç›®æ ‡
- æ¶æ„åæ¨¡å¼å…¨éƒ¨ä¿®å¤
- å¼•å…¥å®¢æˆ·ç«¯ç¼“å­˜ç­–ç•¥
- ç”¨æˆ·èµ„æ–™é¡µå®Œæ•´å¯ç”¨
- ç®¡ç†åå°ä½“éªŒä¸“ä¸šåŒ–

#### Phase 2 æ€§èƒ½æ’æŸ¥å‰ç½®
1. Feed å®¢æˆ·ç«¯å·²åœ¨ `components/feed/feed-page-client.tsx` å†…æ³¨å…¥ `performance.mark/measure`ï¼š
   - `feed-mount-*`ï¼šè¦†ç›–é¡µé¢æŒ‚è½½å…¨è¿‡ç¨‹ã€‚
   - `activities-render-*`ï¼šæŒ‰ tab è®°å½•æ´»åŠ¨åˆ—è¡¨æ¸²æŸ“è€—æ—¶ã€‚
2. å½•åˆ¶æ­¥éª¤ï¼š
   - `pnpm dev` å¯åŠ¨ååœ¨ Chrome Performance é¢æ¿ç‚¹å‡» Recordã€‚
   - é¡µé¢åŠ è½½å®Œæˆååœæ­¢å½•åˆ¶ï¼Œåœ¨ **User Timing** åŒºæŸ¥çœ‹ä¸Šè¿°æ ‡è®°ï¼Œæˆ–äºæ§åˆ¶å°ï¼ˆdev æ¨¡å¼ï¼‰æŸ¥çœ‹ `console.table` è¾“å‡ºã€‚
   - å±•å¼€åŒ…å« `http://localhost:3010/feed` çš„ 100ms é•¿ä»»åŠ¡å †æ ˆï¼Œå½’å› åˆ°å…·ä½“ç»„ä»¶/Providerã€‚
3. å¤ç›˜è®°å½•å†™å…¥ `perf-results/phase1.2-vs-1.0-accurate-analysis.md` é™„è¿‘ï¼Œç¡®ä¿ Phase 2 æ¯æ¬¡å®éªŒï¼ˆå…³é”® CSS / å­—ä½“ / Provider æ‹†åˆ†ï¼‰éƒ½å¯å¤ç”¨ `analyze-lighthouse-data.js` è‡ªåŠ¨ç”Ÿæˆçš„å¯¹æ¯”æŠ¥è¡¨ã€‚

---

### ç¬¬1å¤©ï¼šAdmin Blogæ¶æ„ä¿®å¤ + N+1ä¼˜åŒ–ï¼ˆ**ç©¿æ’æ‰§è¡Œ**ï¼‰

#### ä»»åŠ¡2.1ï¼šAdmin Blogè¿ç§»ä¸ºServer Componentï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/blog/page.tsx`

**å®æ–½æ­¥éª¤**ï¼š
```typescript
// ğŸ†• app/admin/blog/page.tsx (Server Component)
import { Suspense } from 'react'
import { getPosts } from '@/lib/actions/posts'
import PostListClient from './post-list-client'

export default async function AdminBlogPage() {
  const posts = await getPosts({
    status: 'all',
    limit: 50
  })

  return (
    <div>
      <Suspense fallback={<PostListSkeleton />}>
        <PostListClient initialPosts={posts} />
      </Suspense>
    </div>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… é¡µé¢ä¸ºServer Component
- âœ… åˆ é™¤æ‰€æœ‰mockå¸¸é‡
- âœ… åˆ é™¤é”™è¯¯å›é€€é€»è¾‘ï¼ˆä¸å†`setData(mockPosts)`ï¼‰
- âœ… é”™è¯¯æ˜¾ç¤ºçœŸå®æç¤º

**é¢„ä¼°æ—¶é—´**ï¼š4å°æ—¶

---

#### ä»»åŠ¡2.2ï¼šä¼˜åŒ–API N+1æŸ¥è¯¢ï¼ˆ**åŒæ­¥è¿›è¡Œ**ï¼Œ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼šå¤šä¸ªAPIè·¯ç”±

**å®æ–½æ­¥éª¤**ï¼š

1. å®¡è®¡æ‰€æœ‰PrismaæŸ¥è¯¢ï¼š
```bash
# æœç´¢æ‰€æœ‰findMany/findUnique
grep -r "findMany\|findUnique" app/api --include="*.ts"
```

2. é‡ç‚¹ä¼˜åŒ–ï¼š
```typescript
// âŒ ä¸å¥½ï¼šå¯èƒ½N+1
const posts = await prisma.post.findMany()
for (const post of posts) {
  post.comments = await prisma.comment.findMany({
    where: { postId: post.id }
  })
}

// âœ… å¥½ï¼šä½¿ç”¨include
const posts = await prisma.post.findMany({
  include: {
    comments: {
      select: { id: true, content: true, authorId: true },
      take: 5,
    },
    _count: { select: { comments: true } },
  },
})
```

3. æµ‹é‡æ”¹å–„ï¼š
```bash
# å¯ç”¨PrismaæŸ¥è¯¢æ—¥å¿—
# .env.local
DATABASE_URL="..."?connection_limit=10&pool_timeout=0&log=query
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… APIå¹³å‡å“åº”æ—¶é—´ < 100msï¼ˆå½“å‰200-400msï¼‰
- âœ… æ‰€æœ‰æŸ¥è¯¢ä½¿ç”¨includeé¿å…N+1
- âœ… æ…¢æŸ¥è¯¢æ—¥å¿—æ— è­¦å‘Š

**é¢„ä¼°æ—¶é—´**ï¼š4å°æ—¶

---

### ç¬¬2-3å¤©ï¼šå¼•å…¥SWR + Profileæ•°æ®å¯¹æ¥ï¼ˆ**ç©¿æ’æ‰§è¡Œ**ï¼‰

#### ä»»åŠ¡2.3ï¼šå¼•å…¥SWRå®¢æˆ·ç«¯ç¼“å­˜ï¼ˆ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`lib/swr-config.ts`ï¼ˆæ–°å»ºï¼‰ã€`app/layout.tsx`

**å®æ–½æ­¥éª¤**ï¼š

**Step 1ï¼šå®‰è£…å’Œé…ç½®ï¼ˆ0.5å¤©ï¼‰**
```bash
pnpm add swr
```

```typescript
// lib/swr-config.ts
import { SWRConfig } from 'swr'

export const swrConfig = {
  revalidateOnFocus: false,
  revalidateOnReconnect: true,
  dedupingInterval: 5000,
  fetcher: async (url: string) => {
    const res = await fetch(url)
    if (!res.ok) {
      const error = new Error('è¯·æ±‚å¤±è´¥')
      error.info = await res.json()
      error.status = res.status
      throw error
    }
    return res.json()
  },
}

// app/layout.tsx
import { SWRConfig } from 'swr'
import { swrConfig } from '@/lib/swr-config'

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <SWRConfig value={swrConfig}>
          {children}
        </SWRConfig>
      </body>
    </html>
  )
}
```

**Step 2ï¼šæ”¹é€ ç°æœ‰hooksï¼ˆ0.5å¤©ï¼‰**
```typescript
// hooks/use-posts.ts
import useSWR from 'swr'

export function usePosts(params) {
  const { data, error, mutate } = useSWR(
    `/api/posts?${new URLSearchParams(params)}`,
    {
      revalidateOnMount: true,
      dedupingInterval: 5000,
    }
  )

  return {
    posts: data?.data || [],
    isLoading: !error && !data,
    isError: error,
    mutate,
  }
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… SWRå…¨å±€é…ç½®ç”Ÿæ•ˆ
- âœ… è‡³å°‘3ä¸ªhooksæ”¹é€ å®Œæˆï¼ˆposts, activities, usersï¼‰
- âœ… è·¯ç”±åˆ‡æ¢åè¿”å›ï¼Œç¬é—´æ˜¾ç¤ºç¼“å­˜æ•°æ®
- âœ… é‡å¤è¯·æ±‚å‡å°‘70%+

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

#### ä»»åŠ¡2.4ï¼šå®ç°Profileç›¸å…³APIï¼ˆ**åŒæ­¥è¿›è¡Œ**ï¼Œ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼šæ–°å»º3ä¸ªAPIè·¯ç”±

**å®æ–½æ­¥éª¤**ï¼š

```typescript
// app/api/users/[userId]/posts/route.ts
export async function GET(
  request: NextRequest,
  { params }: { params: { userId: string } }
) {
  const searchParams = request.nextUrl.searchParams
  const page = parseInt(searchParams.get('page') || '1')
  const limit = parseInt(searchParams.get('limit') || '10')

  const posts = await prisma.post.findMany({
    where: {
      authorId: params.userId,
      published: true,
      deletedAt: null,
    },
    orderBy: { publishedAt: 'desc' },
    skip: (page - 1) * limit,
    take: limit,
    select: {
      id: true,
      title: true,
      slug: true,
      excerpt: true,
      coverImage: true,
      publishedAt: true,
      _count: { select: { comments: true, likes: true } },
    },
  })

  return NextResponse.json({
    success: true,
    data: posts,
  })
}

// app/api/users/[userId]/activities/route.ts
// ç±»ä¼¼å®ç°

// app/api/users/[userId]/stats/route.ts
export async function GET(
  request: NextRequest,
  { params }: { params: { userId: string } }
) {
  const [followers, following, posts, activities] = await Promise.all([
    prisma.follow.count({ where: { followingId: params.userId } }),
    prisma.follow.count({ where: { followerId: params.userId } }),
    prisma.post.count({ where: { authorId: params.userId, published: true } }),
    prisma.activity.count({ where: { userId: params.userId, deletedAt: null } }),
  ])

  return NextResponse.json({
    success: true,
    data: { followers, following, posts, activities },
  })
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… 3ä¸ªAPIå…¨éƒ¨å®ç°
- âœ… æ”¯æŒåˆ†é¡µ
- âœ… å“åº”æ—¶é—´ < 100ms
- âœ… Vitestæµ‹è¯•é€šè¿‡

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

#### ä»»åŠ¡2.5ï¼šå¯¹æ¥Profileé¡µé¢ï¼ˆ**ç«‹å³è·Ÿè¿›**ï¼Œ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/profile/page.tsx`ã€`app/profile/[userId]/page.tsx`

**å®æ–½æ­¥éª¤**ï¼š

```typescript
// app/profile/page.tsx
"use client"

import useSWR from 'swr'
import { useAuth } from '@/app/providers/auth-provider'

export default function ProfilePage() {
  const { user } = useAuth()

  // ğŸ†• ä½¿ç”¨SWRè·å–çœŸå®æ•°æ®
  const { data: posts } = useSWR(
    user ? `/api/users/${user.id}/posts` : null
  )

  const { data: activities } = useSWR(
    user ? `/api/users/${user.id}/activities` : null
  )

  const { data: stats } = useSWR(
    user ? `/api/users/${user.id}/stats` : null
  )

  // åˆ é™¤ mockPosts å’Œ mockActivitiesï¼ˆLine 27-50ï¼‰

  return (
    <div>
      <ProfileHeader stats={stats?.data} />
      <Tabs>
        <TabsList>
          <TabsTrigger value="posts">
            æ–‡ç«  {stats?.data?.posts || 0}
          </TabsTrigger>
          <TabsTrigger value="activities">
            åŠ¨æ€ {stats?.data?.activities || 0}
          </TabsTrigger>
        </TabsList>

        <TabsContent value="posts">
          {posts?.data?.map(post => <PostCard key={post.id} post={post} />)}
        </TabsContent>

        <TabsContent value="activities">
          {activities?.data?.map(activity => (
            <ActivityCard key={activity.id} activity={activity} />
          ))}
        </TabsContent>
      </Tabs>
    </div>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Profileé¡µæ˜¾ç¤ºçœŸå®æ–‡ç« åˆ—è¡¨
- âœ… åŠ¨æ€Tabæ˜¾ç¤ºçœŸå®åŠ¨æ€
- âœ… ç»Ÿè®¡æ•°å­—ä»APIè·å–
- âœ… åˆ é™¤æ‰€æœ‰mockå¸¸é‡
- âœ… ä½¿ç”¨SWRç¼“å­˜ï¼Œè·¯ç”±åˆ‡æ¢å¿«é€Ÿ

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

### ç¬¬4-5å¤©ï¼šå®Œå–„ä½“éªŒç»†èŠ‚ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰

#### ä»»åŠ¡2.6ï¼šBlogé¡µæ·»åŠ Suspenseè¾¹ç•Œï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/blog/page.tsx`

**å®æ–½æ­¥éª¤**ï¼š
```typescript
// app/blog/page.tsx
import { Suspense } from 'react'

export default function BlogPage({ searchParams }) {
  return (
    <>
      <Suspense fallback={<SearchSkeleton />}>
        <BlogSearchFilter />
      </Suspense>

      <Suspense fallback={<PostListSkeleton />}>
        <PostList searchParams={searchParams} />
      </Suspense>

      <Suspense fallback={<SidebarSkeleton />}>
        <PopularTagsSidebar />
      </Suspense>
    </>
  )
}

async function PostList({ searchParams }) {
  const posts = await getPosts(searchParams)
  return posts.map(post => <BlogPostCard post={post} />)
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… FCPæå‰40%
- âœ… æœç´¢æ ã€åˆ—è¡¨ã€ä¾§è¾¹æ ç‹¬ç«‹åŠ è½½
- âœ… ç”¨æˆ·å¯ä»¥å…ˆçœ‹åˆ°æœç´¢æ ï¼Œå†é€æ­¥çœ‹åˆ°å†…å®¹

**é¢„ä¼°æ—¶é—´**ï¼š4å°æ—¶

---

#### ä»»åŠ¡2.7ï¼šç®¡ç†åå°ä¾§è¾¹æ ï¼ˆ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/layout.tsx`ï¼ˆæ–°å»ºï¼‰

**å®æ–½æ­¥éª¤**ï¼š

```typescript
// app/admin/layout.tsx
import { Sidebar } from '@/components/admin/sidebar'

export default function AdminLayout({ children }) {
  return (
    <div className="flex h-screen">
      <Sidebar />
      <main className="flex-1 overflow-y-auto p-8">
        {children}
      </main>
    </div>
  )
}

// components/admin/sidebar.tsx
"use client"

import Link from 'next/link'
import { usePathname } from 'next/navigation'
import {
  LayoutDashboard,
  FileText,
  Users,
  Tags,
  Settings
} from 'lucide-react'

const menuItems = [
  { href: '/admin', label: 'æ¦‚è§ˆ', icon: LayoutDashboard },
  { href: '/admin/blog', label: 'æ–‡ç« ç®¡ç†', icon: FileText },
  { href: '/admin/users', label: 'ç”¨æˆ·ç®¡ç†', icon: Users },
  { href: '/admin/tags', label: 'æ ‡ç­¾ç®¡ç†', icon: Tags },
  { href: '/admin/settings', label: 'è®¾ç½®', icon: Settings },
]

export function Sidebar() {
  const pathname = usePathname()

  return (
    <aside className="w-64 border-r bg-muted/30">
      <nav className="p-4">
        {menuItems.map(item => {
          const isActive = pathname === item.href
          return (
            <Link
              key={item.href}
              href={item.href}
              className={cn(
                "flex items-center gap-3 px-3 py-2 rounded-lg",
                isActive ? "bg-primary text-primary-foreground" : "hover:bg-muted"
              )}
            >
              <item.icon className="h-5 w-5" />
              {item.label}
            </Link>
          )
        })}
      </nav>
    </aside>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… ç®¡ç†å‘˜åˆ‡æ¢åŠŸèƒ½æ— éœ€é‡æ–°å¯¼èˆª
- âœ… ä¾§è¾¹æ é«˜äº®å½“å‰é¡µé¢
- âœ… å“åº”å¼æŠ˜å æ”¯æŒï¼ˆç§»åŠ¨ç«¯ï¼‰
- âœ… æŒä¹…åŒ–å¸ƒå±€ï¼Œå†…å®¹åŒºç‹¬ç«‹æ»šåŠ¨

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

#### ä»»åŠ¡2.8ï¼šå±é™©æ“ä½œäºŒæ¬¡ç¡®è®¤ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/blog/page.tsx`ã€å…¶ä»–åˆ é™¤æ“ä½œ

**å®æ–½æ­¥éª¤**ï¼š

```typescript
// components/admin/delete-confirm-dialog.tsx
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from "@/components/ui/alert-dialog"

export function DeleteConfirmDialog({
  open,
  onOpenChange,
  onConfirm,
  title = "ç¡®è®¤åˆ é™¤",
  description = "æ­¤æ“ä½œä¸å¯æ’¤é”€"
}) {
  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>{title}</AlertDialogTitle>
          <AlertDialogDescription>{description}</AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel>å–æ¶ˆ</AlertDialogCancel>
          <AlertDialogAction onClick={onConfirm} className="bg-destructive">
            ç¡®è®¤åˆ é™¤
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  )
}

// ä½¿ç”¨ç¤ºä¾‹
function PostActions({ postId }) {
  const [showDeleteDialog, setShowDeleteDialog] = useState(false)

  async function handleDelete() {
    await deletePost(postId)
    setShowDeleteDialog(false)
    toast.success('æ–‡ç« å·²åˆ é™¤')
  }

  return (
    <>
      <Button
        variant="destructive"
        onClick={() => setShowDeleteDialog(true)}
      >
        åˆ é™¤
      </Button>

      <DeleteConfirmDialog
        open={showDeleteDialog}
        onOpenChange={setShowDeleteDialog}
        onConfirm={handleDelete}
        description="åˆ é™¤åæ–‡ç« å°†æ— æ³•æ¢å¤ï¼Œç¡®å®šè¦åˆ é™¤å—ï¼Ÿ"
      />
    </>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰åˆ é™¤æ“ä½œæœ‰äºŒæ¬¡ç¡®è®¤
- âœ… å¯¹è¯æ¡†æ˜¾ç¤ºå½±å“èŒƒå›´
- âœ… å–æ¶ˆæŒ‰é’®åŠŸèƒ½æ­£å¸¸
- âœ… ç¡®è®¤åæ‰§è¡Œåˆ é™¤å¹¶æç¤ºæˆåŠŸ

**é¢„ä¼°æ—¶é—´**ï¼š4å°æ—¶

---

#### ä»»åŠ¡2.9ï¼šè¡¨å•å®æ—¶éªŒè¯ï¼ˆ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/blog/create/page.tsx`ã€`components/admin/post-form.tsx`

**å®æ–½æ­¥éª¤**ï¼š

```bash
# å®‰è£…ä¾èµ–
pnpm add react-hook-form @hookform/resolvers zod
```

```typescript
// components/admin/post-form.tsx
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'

const postSchema = z.object({
  title: z.string().min(5, 'æ ‡é¢˜è‡³å°‘5ä¸ªå­—ç¬¦').max(100, 'æ ‡é¢˜æœ€å¤š100ä¸ªå­—ç¬¦'),
  content: z.string().min(50, 'å†…å®¹è‡³å°‘50ä¸ªå­—ç¬¦'),
  excerpt: z.string().max(200, 'æ‘˜è¦æœ€å¤š200ä¸ªå­—ç¬¦').optional(),
  coverImage: z.string().url('è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡URL').optional(),
})

export function PostForm({ initialData, onSubmit }) {
  const form = useForm({
    resolver: zodResolver(postSchema),
    defaultValues: initialData || {},
    mode: 'onChange',  // å®æ—¶éªŒè¯
  })

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)}>
        <FormField
          control={form.control}
          name="title"
          render={({ field }) => (
            <FormItem>
              <FormLabel>æ ‡é¢˜</FormLabel>
              <FormControl>
                <Input {...field} />
              </FormControl>
              {/* ğŸ†• å®æ—¶é”™è¯¯æç¤º */}
              <FormMessage />
            </FormItem>
          )}
        />

        {/* å…¶ä»–å­—æ®µ */}

        <Button type="submit" disabled={!form.formState.isValid}>
          ä¿å­˜
        </Button>
      </form>
    </Form>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… ç”¨æˆ·è¾“å…¥å³æ—¶çœ‹åˆ°é”™è¯¯æç¤º
- âœ… å†…è”é”™è¯¯æ¶ˆæ¯æ¸…æ™°æ˜“æ‡‚
- âœ… æäº¤æŒ‰é’®åœ¨è¡¨å•æ— æ•ˆæ—¶ç¦ç”¨
- âœ… æ‰€æœ‰å¿…å¡«å­—æ®µæœ‰éªŒè¯

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

### Phase 2 æ€»ç»“

**æ€»å·¥æ—¶**ï¼š9å¤©
**å®é™…æ—¥å†æ—¶é—´**ï¼š5-6å¤©ï¼ˆè€ƒè™‘å¹¶è¡Œå’Œç©¿æ’æ‰§è¡Œï¼‰

**äº¤ä»˜ç‰©æ£€æŸ¥æ¸…å•**ï¼š
- âœ… Lighthouseæ€§èƒ½åˆ†æ•°>80ï¼ˆå½“å‰45-60ï¼‰
- âœ… æ‰€æœ‰æ ¸å¿ƒé¡µé¢ä½¿ç”¨çœŸå®æ•°æ®
- âœ… æ¶æ„åæ¨¡å¼å…¨éƒ¨ä¿®å¤
- âœ… SWRç¼“å­˜ç”Ÿæ•ˆï¼Œé‡å¤è¯·æ±‚å‡å°‘70%
- âœ… Profileé¡µå®Œæ•´å¯ç”¨
- âœ… ç®¡ç†åå°ä½“éªŒä¸“ä¸šåŒ–
- âœ… APIå“åº”æ—¶é—´<100ms
- âœ… æ‰€æœ‰è¡¨å•æœ‰å®æ—¶éªŒè¯

---

## ğŸ“… Phase 3ï¼šä½“éªŒå®Œå–„ï¼ˆWeek 3ï¼Œ5-6å¤©ï¼‰

### ğŸ¯ Phase 3 ç›®æ ‡
- å¿è¿˜æŠ€æœ¯å€ºåŠ¡
- æ‰“ç£¨ç”¨æˆ·ä½“éªŒç»†èŠ‚
- å®Œå–„ç›‘æ§å’Œå®¡è®¡ä½“ç³»
- ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿ

**å…³é”®åŸåˆ™**ï¼šéµå®ˆ"ç»ä¸å›é€€mock"è§„åˆ™ï¼Œæ‰€æœ‰P2é—®é¢˜éƒ½å¿…é¡»çœŸå®å®ç°

---

### ç¬¬1-2å¤©ï¼šç›‘æ§å’Œè®¾ç½®çœŸå®åŒ–ï¼ˆ**ä¸¥æ ¼éµå®ˆç”¨æˆ·è¡¥å……**ï¼‰

#### ä»»åŠ¡3.1ï¼šç›‘æ§æŒä¹…åŒ–å®ç°ï¼ˆ1.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯+å‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`lib/performance-monitor.ts`ã€`components/admin/monitoring-dashboard.tsx`

**å®æ–½æ­¥éª¤**ï¼š

**Step 1ï¼šé€‰æ‹©å­˜å‚¨æ–¹æ¡ˆï¼ˆ0.5å¤©ï¼‰**
```sql
-- åˆ›å»ºç›‘æ§æ•°æ®è¡¨
-- supabase/migrations/[timestamp]_create_monitoring_tables.sql

CREATE TABLE performance_metrics (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  timestamp TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  metric_type VARCHAR(50) NOT NULL,  -- 'page_load', 'api_call', 'error', etc.
  value JSONB NOT NULL,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_performance_metrics_timestamp
  ON performance_metrics(timestamp DESC);
CREATE INDEX idx_performance_metrics_type
  ON performance_metrics(metric_type);
```

**Step 2ï¼šæ”¹é€ ç›‘æ§å™¨ï¼ˆ0.5å¤©ï¼‰**
```typescript
// lib/performance-monitor.ts
import { prisma } from '@/lib/prisma'

class PerformanceMonitor {
  async recordMetric(metric: {
    type: string
    value: any
  }) {
    // ğŸ†• æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼Œä¸å†ç”¨å†…å­˜æ•°ç»„
    await prisma.performanceMetric.create({
      data: {
        metricType: metric.type,
        value: metric.value,
      }
    })
  }

  async getPerformanceReport(timeRange: string) {
    // ğŸ†• ä»æ•°æ®åº“èšåˆï¼Œä¸å†è¿”å›è¿›ç¨‹å†…æ•°æ®
    const metrics = await prisma.performanceMetric.findMany({
      where: {
        timestamp: {
          gte: this.getTimeRangeStart(timeRange),
        }
      },
      orderBy: { timestamp: 'desc' }
    })

    return this.aggregateMetrics(metrics)
  }
}
```

**Step 3ï¼šAPIç«¯ç‚¹å®ç°ï¼ˆ0.5å¤©ï¼‰**
```typescript
// app/api/admin/monitoring/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { requireAdmin } from '@/lib/auth/session'
import { performanceMonitor } from '@/lib/performance-monitor'

export async function GET(request: NextRequest) {
  await requireAdmin()  // å¿…é¡»ç®¡ç†å‘˜

  const { searchParams } = request.nextUrl
  const timeRange = searchParams.get('range') || '24h'

  try {
    const report = await performanceMonitor.getPerformanceReport(timeRange)

    // ğŸ†• ç»ä¸è¿”å›å‡æ•°æ®ï¼
    return NextResponse.json({
      success: true,
      data: report
    })
  } catch (error) {
    // ğŸ†• é”™è¯¯æ˜ç¡®æç¤ºï¼Œä¸å›é€€åˆ°mock
    return NextResponse.json({
      success: false,
      error: { message: `ç›‘æ§æ•°æ®è·å–å¤±è´¥: ${error.message}` }
    }, { status: 500 })
  }
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… ç›‘æ§æ•°æ®å­˜å‚¨åˆ°Supabase
- âœ… åˆ·æ–°é¡µé¢åæ•°æ®ä¸€è‡´
- âœ… æ”¯æŒæ—¶é—´èŒƒå›´æŸ¥è¯¢ï¼ˆ1h/24h/7d/30dï¼‰
- âœ… é”™è¯¯æ—¶æ˜ç¡®æç¤ºï¼Œä¸æ˜¾ç¤ºå‡æ•°æ®
- âœ… åˆ é™¤æ‰€æœ‰æœ¬åœ°éšæœºæ•°ç”Ÿæˆé€»è¾‘

**é¢„ä¼°æ—¶é—´**ï¼š1.5å¤©

---

#### ä»»åŠ¡3.2ï¼šè®¾ç½®é¡µçœŸå®ä¿å­˜ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯+å‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/admin/settings/page.tsx`ã€`app/api/admin/settings/route.ts`

**å®æ–½æ­¥éª¤**ï¼š

**Step 1ï¼šåˆ›å»ºé…ç½®è¡¨**
```sql
-- supabase/migrations/[timestamp]_create_settings_table.sql

CREATE TABLE system_settings (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  key VARCHAR(100) UNIQUE NOT NULL,
  value JSONB NOT NULL,
  updated_by UUID REFERENCES users(id),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
```

**Step 2ï¼šAPIå®ç°**
```typescript
// app/api/admin/settings/route.ts
export async function GET() {
  const settings = await prisma.systemSettings.findMany()
  return NextResponse.json({ success: true, data: settings })
}

export async function POST(request: NextRequest) {
  const admin = await requireAdmin()
  const body = await request.json()

  // ğŸ†• çœŸå®ä¿å­˜ï¼Œä¸æ˜¯å‡æ“ä½œ
  const setting = await prisma.systemSettings.upsert({
    where: { key: body.key },
    update: {
      value: body.value,
      updatedBy: admin.id,
      updatedAt: new Date(),
    },
    create: {
      key: body.key,
      value: body.value,
      updatedBy: admin.id,
    }
  })

  // ğŸ†• è®°å½•å®¡è®¡æ—¥å¿—
  await auditLogger.log({
    action: 'UPDATE_SETTINGS',
    userId: admin.id,
    details: { key: body.key, oldValue: '...', newValue: body.value }
  })

  return NextResponse.json({ success: true, data: setting })
}
```

**Step 3ï¼šå‰ç«¯å¯¹æ¥**
```typescript
// app/admin/settings/page.tsx
"use client"

export default function AdminSettings() {
  const [settings, setSettings] = useState({})
  const [saving, setSaving] = useState(false)

  async function handleSave(key: string, value: any) {
    setSaving(true)
    try {
      const result = await fetchPost('/api/admin/settings', { key, value })

      if (!result.success) {
        // ğŸ†• æ˜ç¡®é”™è¯¯æç¤º
        throw new Error(result.error.message)
      }

      toast.success('è®¾ç½®å·²ä¿å­˜')
      setSettings(prev => ({ ...prev, [key]: value }))
    } catch (error) {
      // ğŸ†• ç»ä¸å‡è£…ä¿å­˜æˆåŠŸï¼
      toast.error(`ä¿å­˜å¤±è´¥: ${error.message}`)
    } finally {
      setSaving(false)
    }
  }

  return (
    <form>
      {/* å„ç§è®¾ç½®é¡¹ */}
      <Button
        onClick={() => handleSave('site_name', siteName)}
        disabled={saving}
      >
        {saving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜è®¾ç½®'}
      </Button>
    </form>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… è®¾ç½®çœŸå®ä¿å­˜åˆ°æ•°æ®åº“
- âœ… åˆ·æ–°åæ•°æ®æŒä¹…åŒ–
- âœ… æ‰€æœ‰æ“ä½œæœ‰å®¡è®¡æ—¥å¿—
- âœ… é”™è¯¯æ—¶æ˜ç¡®æç¤ºåŸå› 
- âœ… åˆ é™¤å‡çš„"ä¿å­˜æˆåŠŸ"æç¤º

**é¢„ä¼°æ—¶é—´**ï¼š0.5å¤©

---

#### ä»»åŠ¡3.3ï¼šé¦–é¡µLatest ContentçœŸå®åŒ–ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`components/latest-content-section.tsx`

**å®æ–½æ­¥éª¤**ï¼š
```typescript
// components/latest-content-section.tsx
"use client"

import useSWR from 'swr'

export function LatestContentSection() {
  // ğŸ†• è°ƒç”¨çœŸå®APIï¼Œä½¿ç”¨SWRç¼“å­˜
  const { data, isLoading, error } = useSWR('/api/posts?limit=6&sort=latest')

  if (isLoading) return <LatestContentSkeleton />

  // ğŸ†• é”™è¯¯æ˜ç¡®æ˜¾ç¤º
  if (error) {
    return (
      <div className="text-center py-8">
        <p className="text-muted-foreground">
          æœ€æ–°å†…å®¹åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åå†è¯•
        </p>
      </div>
    )
  }

  const posts = data?.data || []

  // ğŸ†• ç©ºçŠ¶æ€
  if (posts.length === 0) {
    return (
      <div className="text-center py-8">
        <p className="text-muted-foreground">æš‚æ— æœ€æ–°å†…å®¹</p>
      </div>
    )
  }

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {posts.map(post => (
        <PostCard key={post.id} post={post} />
      ))}
    </div>
  )
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ˜¾ç¤ºçœŸå®æœ€æ–°6ç¯‡æ–‡ç« 
- âœ… ä¸/blogé¡µé¢æ•°æ®ä¸€è‡´
- âœ… åˆ é™¤samplePostså¸¸é‡ï¼ˆLine 11-40ï¼‰
- âœ… ä½¿ç”¨SWRç¼“å­˜

**é¢„ä¼°æ—¶é—´**ï¼š0.5å¤©

---

### ç¬¬3å¤©ï¼šåŠ¨ç”»å’Œæ€§èƒ½ä¼˜åŒ–

#### ä»»åŠ¡3.4ï¼šä¼˜åŒ–Framer Motionä½¿ç”¨ï¼ˆ1å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`app/feed/page.tsx`ã€`components/navigation.tsx`ã€`components/blog/blog-post-card.tsx`

**å®æ–½æ­¥éª¤**ï¼š

**Step 1ï¼šç§»é™¤æ— é™å¾ªç¯åŠ¨ç”»**
```typescript
// âŒ åˆ é™¤è¿™ç§ä»£ç 
<motion.div
  animate={{
    rotate: 360,
    scale: [1, 1.1, 1],
  }}
  transition={{
    repeat: Infinity,  // ç§»é™¤æ— é™å¾ªç¯
    duration: 3
  }}
>
```

**Step 2ï¼šæ·»åŠ prefers-reduced-motionæ”¯æŒ**
```typescript
// lib/utils/motion.ts
export const useReducedMotion = () => {
  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false)

  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)')
    setPrefersReducedMotion(mediaQuery.matches)

    const handler = () => setPrefersReducedMotion(mediaQuery.matches)
    mediaQuery.addEventListener('change', handler)
    return () => mediaQuery.removeEventListener('change', handler)
  }, [])

  return prefersReducedMotion
}

// ä½¿ç”¨ç¤ºä¾‹
function AnimatedCard() {
  const prefersReducedMotion = useReducedMotion()

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{
        duration: prefersReducedMotion ? 0 : 0.3  // å°Šé‡ç”¨æˆ·åå¥½
      }}
    >
      {/* å†…å®¹ */}
    </motion.div>
  )
}
```

**Step 3ï¼šå‡å°‘åŠ¨ç”»å¯†åº¦**
- æ¯é¡µæœ€å¤š10ä¸ªmotionç»„ä»¶
- ç§»é™¤å¡ç‰‡hoveråŠ¨ç”»ä¸­çš„scale/rotate
- ä¿ç•™ç®€å•çš„fade/slide

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… åˆ é™¤æ‰€æœ‰æ— é™å¾ªç¯åŠ¨ç”»
- âœ… æ”¯æŒprefers-reduced-motion
- âœ… ç§»åŠ¨ç«¯æ— åŠ¨ç”»å¡é¡¿
- âœ… Lighthouseæ€§èƒ½åˆ†æ•°ä¸é™ä½

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

### ç¬¬4å¤©ï¼šæ•°æ®åº“å’Œè®¾è®¡ç³»ç»Ÿ

#### ä»»åŠ¡3.5ï¼šæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–ï¼ˆ0.5å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šåç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼š`prisma/schema.prisma`

**å®æ–½æ­¥éª¤**ï¼š
```prisma
// æ·»åŠ ç¼ºå¤±çš„ç´¢å¼•
model User {
  @@index([email])  // ä¼˜åŒ–ç™»å½•æŸ¥è¯¢
  @@index([status, role])  // ä¼˜åŒ–æƒé™æŸ¥è¯¢
}

model Comment {
  @@index([postId, deletedAt, createdAt(sort: Desc)])
  @@index([activityId, deletedAt, createdAt(sort: Desc)])
}

model Like {
  @@index([postId, createdAt(sort: Desc)])
  @@index([authorId, createdAt(sort: Desc)])
}
```

```bash
# ç”Ÿæˆè¿ç§»
npx prisma migrate dev --name add_missing_indexes

# éªŒè¯æŸ¥è¯¢è®¡åˆ’
psql $DATABASE_URL -c "EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'test@example.com'"
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰å¸¸ç”¨æŸ¥è¯¢æœ‰åˆé€‚ç´¢å¼•
- âœ… EXPLAIN ANALYZEæ˜¾ç¤ºä½¿ç”¨ç´¢å¼•
- âœ… æ…¢æŸ¥è¯¢æ—¥å¿—æ— è­¦å‘Š

**é¢„ä¼°æ—¶é—´**ï¼š0.5å¤©

---

#### ä»»åŠ¡3.6ï¼šç»Ÿä¸€è®¾è®¡ç³»ç»Ÿï¼ˆ2å¤©ï¼‰
**è´Ÿè´£äºº**ï¼šå‰ç«¯å·¥ç¨‹å¸ˆ
**æ–‡ä»¶**ï¼šå¤šä¸ªç»„ä»¶æ–‡ä»¶

**å®æ–½æ­¥éª¤**ï¼š

**Day 1ï¼šé¢œè‰²å’Œé—´è·è§„èŒƒï¼ˆ1å¤©ï¼‰**
```typescript
// lib/design-tokens.ts
export const colors = {
  primary: 'hsl(var(--primary))',
  secondary: 'hsl(var(--secondary))',
  destructive: 'hsl(var(--destructive))',
  muted: 'hsl(var(--muted))',
  accent: 'hsl(var(--accent))',
}

export const spacing = {
  xs: '0.25rem',  // 4px
  sm: '0.5rem',   // 8px
  md: '1rem',     // 16px
  lg: '1.5rem',   // 24px
  xl: '2rem',     // 32px
  '2xl': '3rem',  // 48px
}

// å…¨å±€æ›¿æ¢ç¡¬ç¼–ç é¢œè‰²
// âŒ text-green-600 â†’ âœ… text-primary
// âŒ bg-blue-500 â†’ âœ… bg-accent
```

**Day 2ï¼šç»Ÿä¸€å¡ç‰‡å’Œå¸ƒå±€ï¼ˆ1å¤©ï¼‰**
```typescript
// components/ui/card-variants.ts
import { cva } from 'class-variance-authority'

export const cardVariants = cva(
  'rounded-lg border bg-card text-card-foreground shadow-sm',
  {
    variants: {
      hover: {
        true: 'transition-shadow hover:shadow-lg',
        false: '',
      },
      padding: {
        sm: 'p-4',
        md: 'p-6',
        lg: 'p-8',
      }
    },
    defaultVariants: {
      hover: false,
      padding: 'md',
    }
  }
)

// ä½¿ç”¨ç»Ÿä¸€å¡ç‰‡
<Card className={cardVariants({ hover: true, padding: 'lg' })}>
  {/* å†…å®¹ */}
</Card>
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… åˆ é™¤æ‰€æœ‰ç¡¬ç¼–ç é¢œè‰²å€¼
- âœ… ç»Ÿä¸€ä½¿ç”¨è®¾è®¡token
- âœ… å¡ç‰‡æ ·å¼ä¸€è‡´ï¼ˆ3ç§å˜ä½“ï¼‰
- âœ… é—´è·ä½¿ç”¨8pxå€æ•°
- âœ… å­—ä½“å¤§å°å±‚çº§æ¸…æ™°ï¼ˆ6ä¸ªçº§åˆ«ï¼‰

**é¢„ä¼°æ—¶é—´**ï¼š2å¤©

---

### ç¬¬5å¤©ï¼šå…¶ä»–P2é—®é¢˜æ”¶å°¾

#### ä»»åŠ¡3.7ï¼šé¢åŒ…å±‘å¯¼èˆªï¼ˆ0.5å¤©ï¼‰
**æ–‡ä»¶**ï¼šæ·±å±‚é¡µé¢

```typescript
// components/ui/breadcrumb-nav.tsx
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbPage,
  BreadcrumbSeparator,
} from "@/components/ui/breadcrumb"

export function BreadcrumbNav({ items }) {
  return (
    <Breadcrumb>
      <BreadcrumbList>
        {items.map((item, index) => (
          <Fragment key={index}>
            {index > 0 && <BreadcrumbSeparator />}
            <BreadcrumbItem>
              {index < items.length - 1 ? (
                <BreadcrumbLink href={item.href}>
                  {item.label}
                </BreadcrumbLink>
              ) : (
                <BreadcrumbPage>{item.label}</BreadcrumbPage>
              )}
            </BreadcrumbItem>
          </Fragment>
        ))}
      </BreadcrumbList>
    </Breadcrumb>
  )
}

// ä½¿ç”¨ç¤ºä¾‹
// app/admin/blog/edit/[id]/page.tsx
<BreadcrumbNav items={[
  { href: '/admin', label: 'ç®¡ç†åå°' },
  { href: '/admin/blog', label: 'æ–‡ç« ç®¡ç†' },
  { label: 'ç¼–è¾‘æ–‡ç« ' },
]} />
```

**é¢„ä¼°æ—¶é—´**ï¼š0.5å¤©

---

#### ä»»åŠ¡3.8ï¼šæœç´¢é¡µå¼•å¯¼ä¼˜åŒ–ï¼ˆ1å¤©ï¼‰
**æ–‡ä»¶**ï¼š`app/search/page.tsx`

**å®æ–½æ­¥éª¤**ï¼š
```typescript
// components/search/search-suggestions.tsx
export function SearchSuggestions() {
  const { data: popularSearches } = useSWR('/api/search/popular')
  const { data: recentSearches } = useSWR('/api/search/history')

  return (
    <div className="space-y-6">
      {recentSearches?.length > 0 && (
        <div>
          <h3>æœ€è¿‘æœç´¢</h3>
          <div className="flex flex-wrap gap-2">
            {recentSearches.map(term => (
              <Badge key={term} variant="secondary">
                {term}
              </Badge>
            ))}
          </div>
        </div>
      )}

      <div>
        <h3>çƒ­é—¨æœç´¢</h3>
        <div className="flex flex-wrap gap-2">
          {popularSearches?.map(term => (
            <Badge key={term} variant="outline">
              {term}
            </Badge>
          ))}
        </div>
      </div>
    </div>
  )
}
```

**é¢„ä¼°æ—¶é—´**ï¼š1å¤©

---

### Phase 3 æ€»ç»“

**æ€»å·¥æ—¶**ï¼š9.5å¤©
**å®é™…æ—¥å†æ—¶é—´**ï¼š5-6å¤©ï¼ˆè€ƒè™‘å¹¶è¡Œï¼‰

**äº¤ä»˜ç‰©æ£€æŸ¥æ¸…å•**ï¼š
- âœ… ç›‘æ§æ•°æ®æŒä¹…åŒ–ï¼Œåˆ·æ–°ä¸ä¸¢å¤±
- âœ… è®¾ç½®é¡µçœŸå®ä¿å­˜ï¼Œæœ‰å®¡è®¡è®°å½•
- âœ… é¦–é¡µå†…å®¹çœŸå®åŒ–
- âœ… åŠ¨ç”»ä¼˜åŒ–ï¼Œæ”¯æŒreduced-motion
- âœ… æ•°æ®åº“ç´¢å¼•å®Œå–„
- âœ… è®¾è®¡ç³»ç»Ÿç»Ÿä¸€ï¼ˆé¢œè‰²ã€é—´è·ã€å¡ç‰‡ï¼‰
- âœ… é¢åŒ…å±‘å¯¼èˆªæ·»åŠ åˆ°æ·±å±‚é¡µé¢
- âœ… æœç´¢é¡µå¼•å¯¼ä¼˜åŒ–
- âœ… **æ‰€æœ‰P2é—®é¢˜éµå®ˆ"ç»ä¸å›é€€mock"åŸåˆ™**

---

## ğŸ“… Phase 4ï¼šé•¿æœŸä¼˜åŒ–ï¼ˆWeek 4+ï¼ŒæŒç»­è¿›è¡Œï¼‰

### ğŸ¯ Phase 4 ç›®æ ‡
- å®Œå–„å¯è®¿é—®æ€§ï¼ˆWCAG 2.1 AAï¼‰
- å»ºç«‹æ€§èƒ½ç›‘æ§ä»ªè¡¨æ¿
- æå‡æµ‹è¯•è¦†ç›–ç‡ï¼ˆç›®æ ‡80%ï¼‰
- å¼•å…¥ISRé™æ€ç”Ÿæˆ
- å»ºç«‹è®¾è®¡ç³»ç»Ÿæ–‡æ¡£

**é¢„ä¼°æ—¶é—´**ï¼š3-5å¤©ï¼ˆå¯å»¶åï¼ŒæŒ‰ä¼˜å…ˆçº§æ’æœŸï¼‰

---

## ğŸ“Š æ€»ä½“æ—¶é—´çº¿å’Œé‡Œç¨‹ç¢‘

```
Week 1 â”â”â”â”â”â”â”â”â”â”â”â”â”â” Phase 1: ç´§æ€¥ä¿®å¤
Day 1-2  â”‚ å›¾ç‰‡+ä¸­é—´ä»¶+ç§»åŠ¨å¯¼èˆªï¼ˆå¹¶è¡Œï¼‰
Day 3-5  â”‚ Activity API å®ç°
Day 6-7  â”‚ Feedä¿®å¤ + ç®¡ç†åå°å¯¹æ¥ï¼ˆç©¿æ’ï¼‰
         â””â”€ é‡Œç¨‹ç¢‘: æ ¸å¿ƒåŠŸèƒ½è§£é™¤é˜»å¡

Week 2 â”â”â”â”â”â”â”â”â”â”â”â”â”â” Phase 2: æ€§èƒ½ä¼˜åŒ–
Day 1    â”‚ Admin Blog + N+1ä¼˜åŒ–ï¼ˆç©¿æ’ï¼‰
Day 2-3  â”‚ SWRå¼•å…¥ + Profile API + å‰ç«¯å¯¹æ¥ï¼ˆç©¿æ’ï¼‰
Day 4-5  â”‚ Suspense + ä¾§è¾¹æ  + ç¡®è®¤ + éªŒè¯ï¼ˆå¹¶è¡Œï¼‰
         â””â”€ é‡Œç¨‹ç¢‘: æ¶æ„å®Œå–„ï¼Œæ€§èƒ½è¾¾æ ‡

Week 3 â”â”â”â”â”â”â”â”â”â”â”â”â”â” Phase 3: ä½“éªŒå®Œå–„
Day 1-2  â”‚ ç›‘æ§æŒä¹…åŒ– + è®¾ç½®çœŸå®åŒ– + é¦–é¡µçœŸå®åŒ–
Day 3    â”‚ åŠ¨ç”»ä¼˜åŒ–
Day 4    â”‚ æ•°æ®åº“ç´¢å¼• + è®¾è®¡ç³»ç»Ÿå¼€å§‹
Day 5    â”‚ è®¾è®¡ç³»ç»Ÿå®Œæˆ + P2æ”¶å°¾
         â””â”€ é‡Œç¨‹ç¢‘: æŠ€æœ¯å€ºæ¸…é›¶ï¼Œä½“éªŒæ‰“ç£¨å®Œæˆ

Week 4+  â”â”â”â”â”â”â”â”â”â”â”â”â” Phase 4: é•¿æœŸä¼˜åŒ–
         â”‚ å¯è®¿é—®æ€§ã€æµ‹è¯•ã€æ–‡æ¡£ã€ISRç­‰
         â””â”€ é‡Œç¨‹ç¢‘: è´¨é‡ä¿éšœä½“ç³»å»ºç«‹
```

---

## âœ… éªŒæ”¶æ ‡å‡†æ€»è§ˆ

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | åŸºçº¿ | Phase 1 | Phase 2 | Phase 3 | æœ€ç»ˆç›®æ ‡ |
|------|------|---------|---------|---------|----------|
| é¦–é¡µTTFB | 800ms | <400ms | <250ms | <200ms | <200ms âœ… |
| Feed TTI | 5s | 3.5s | 2.5s | <2s | <2s âœ… |
| APIå“åº” | 300ms | <200ms | <120ms | <100ms | <100ms âœ… |
| Lighthouse | 50 | 70 | 80 | 85+ | 85+ âœ… |
| ç§»åŠ¨å¯ç”¨ | 0% | 100% | 100% | 100% | 100% âœ… |

---

### åŠŸèƒ½å®Œæ•´æ€§

| æ¨¡å— | åŸºçº¿ | Phase 1 | Phase 2 | Phase 3 | æœ€ç»ˆ |
|------|------|---------|---------|---------|------|
| åšå®¢ | 90% | 92% | 95% | 95% | 95% âœ… |
| åŠ¨æ€ | 0% | 60% | 80% | 90% | 90% âœ… |
| ç®¡ç† | 60% | 80% | 90% | 95% | 95% âœ… |
| ç”¨æˆ· | 80% | 85% | 92% | 95% | 95% âœ… |

---

### ä»£ç è´¨é‡

| æŒ‡æ ‡ | åŸºçº¿ | æœ€ç»ˆç›®æ ‡ |
|------|------|----------|
| Mockæ•°æ®å æ¯” | 40% | 0% âœ… |
| è®¾è®¡ä¸€è‡´æ€§ | 60% | 95% âœ… |
| æµ‹è¯•è¦†ç›–ç‡ | æœªçŸ¥ | 80% |
| é”™è¯¯å›é€€mock | å¤šå¤„ | 0å¤„ âœ… |

---

## ğŸš¨ å…³é”®å†³ç­–å’ŒåŸåˆ™

### å†³ç­–1ï¼šç©¿æ’æ‰§è¡Œç­–ç•¥ï¼ˆç”¨æˆ·è¡¥å……ï¼‰
**åŸåˆ™**ï¼šAPIå®ç°å®Œç«‹å³å¯¹æ¥å‰ç«¯ï¼ŒåŒä¸€å¤©å†…å®Œæˆé—­ç¯

**æ‰§è¡Œç¤ºä¾‹**ï¼š
- Day 1: Profile API â†’ ç«‹å³å‰ç«¯å¯¹æ¥
- Day 2: SWRå¼•å…¥ â†’ è¾¹æ”¹é€ è¾¹éªŒè¯
- ç¦æ­¢"å…ˆåšå®Œæ‰€æœ‰åç«¯ï¼Œå†ç»Ÿä¸€æ”¹å‰ç«¯"

---

### å†³ç­–2ï¼šç»ä¸å›é€€Mockï¼ˆç”¨æˆ·è¡¥å……ï¼‰
**åŸåˆ™**ï¼šé€»è¾‘ä¸é€šå®å¯æŠ¥é”™ï¼Œä¸è¦å›é€€åˆ°mock

**ä»£ç è¦æ±‚**ï¼š
```typescript
// âŒ ä¸¥ç¦
catch (error) { setData(mockData) }

// âœ… å¿…é¡»
catch (error) {
  toast.error(error.message)
  setData(null)
}
```

**é€‚ç”¨èŒƒå›´**ï¼š
- ç›‘æ§æŒä¹…åŒ–ï¼ˆP2ï¼‰ï¼šå¤±è´¥æ˜¾ç¤º"ç›‘æ§æœåŠ¡ä¸å¯ç”¨"
- è®¾ç½®é¡µä¿å­˜ï¼ˆP2ï¼‰ï¼šå¤±è´¥æ˜¾ç¤ºå…·ä½“é”™è¯¯åŸå› 
- æ‰€æœ‰P2ã€P3é—®é¢˜éƒ½éµå®ˆæ­¤åŸåˆ™

---

### å†³ç­–3ï¼šæŒç»­éªŒè¯
- æ¯ä¸ªä»»åŠ¡å®Œæˆç«‹å³æµ‹è¯•
- ä¸å †ç§¯é—®é¢˜åˆ°æœ€å
- å‘ç°é—®é¢˜ç«‹å³ä¿®å¤

---

### å†³ç­–4ï¼šæŒ‰èŠ‚ç‚¹æ¨è¿›
- Phase 1 â†’ 2 â†’ 3 é¡ºåºæ‰§è¡Œ
- ä¸æ‹–å»¶ã€ä¸è·³æ­¥
- äº¤ä»˜ç‰©æ˜ç¡®å¯éªŒæ”¶

---

## ğŸ“ æ‰§è¡Œæ£€æŸ¥æ¸…å•

### Phase 1 å¼€å§‹å‰
- [ ] å®¡æŸ¥Activityè¡¨ç»“æ„
- [ ] ç¡®è®¤Supabase CLIæœ¬åœ°ç¯å¢ƒè¿è¡Œ
- [ ] å¤‡ä»½å½“å‰ä»£ç ï¼ˆåˆ›å»ºåˆ†æ”¯ï¼‰
- [ ] å‡†å¤‡æµ‹è¯•ç¯å¢ƒ
- [ ] å›¢é˜Ÿæˆå‘˜ä»»åŠ¡åˆ†é…

### æ¯æ—¥æ”¶å·¥å‰
- [ ] æäº¤ä»£ç å¹¶æ¨é€
- [ ] æ›´æ–°è¿›åº¦æ–‡æ¡£
- [ ] è®°å½•é‡åˆ°çš„é—®é¢˜
- [ ] æ˜ç¡®ç¬¬äºŒå¤©ä»»åŠ¡

### æ¯ä¸ªPhaseç»“æŸå
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- [ ] Lighthouseæ€§èƒ½æµ‹è¯•
- [ ] ä»£ç Review
- [ ] æ›´æ–°äº¤ä»˜ç‰©æ£€æŸ¥æ¸…å•
- [ ] Demoç»™å›¢é˜Ÿæˆå‘˜

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨è®¡åˆ’

**æ˜å¤©ï¼ˆWeek 1 Day 1ï¼‰å°±å¼€å§‹**ï¼š

### ä¸Šåˆä»»åŠ¡ï¼ˆå¹¶è¡Œï¼‰
```bash
# ä»»åŠ¡1ï¼šå›¾ç‰‡ä¼˜åŒ–ï¼ˆå‰ç«¯å·¥ç¨‹å¸ˆAï¼‰
# ä¿®æ”¹ next.config.mjs
# é¢„è®¡: 4å°æ—¶

# ä»»åŠ¡2ï¼šä¸­é—´ä»¶ä¼˜åŒ–ï¼ˆåç«¯å·¥ç¨‹å¸ˆBï¼‰
# ä¿®æ”¹ middleware.ts
# é¢„è®¡: 4å°æ—¶
```

### ä¸‹åˆä»»åŠ¡
```bash
# ä»»åŠ¡3ï¼šç§»åŠ¨ç«¯å¯¼èˆªï¼ˆå‰ç«¯å·¥ç¨‹å¸ˆAï¼‰
# ä¿®æ”¹ components/navigation.tsx
# é¢„è®¡: 4å°æ—¶ï¼ˆä»Šå¤©å®Œæˆä¸€åŠï¼Œæ˜å¤©ç»§ç»­ï¼‰
```

### éªŒè¯æ–¹æ³•
```bash
# æ€§èƒ½éªŒè¯
pnpm build
pnpm lighthouse http://localhost:3000

# ç§»åŠ¨ç«¯éªŒè¯
# Chrome DevTools â†’ è®¾å¤‡æ¨¡æ‹Ÿ â†’ æµ‹è¯•å„ç§å±å¹•
```

---

**åå¤©ï¼ˆWeek 1 Day 2ï¼‰**ï¼š

### å…¨å¤©ä»»åŠ¡
```bash
# å®Œæˆç§»åŠ¨ç«¯å¯¼èˆª + å¼€å§‹Activityè¡¨å®¡æŸ¥
# é¢„è®¡: 8å°æ—¶
```

---

### Stage Bï¼šBundle æ‹†åˆ†æ‰§è¡Œè®°å½•ï¼ˆ2025-11-11ï¼‰

- âœ… `ANALYZE=true pnpm build` ç”Ÿæˆ `.next/analyze/*.html`ï¼Œå®šä½ 6e581eae / 9212 chunk çš„ Radix / å¯Œæ–‡æœ¬ä¾èµ–ã€‚
- âœ… `next.config.mjs` è¿½åŠ  `react / radix / prisma / lucide / utils / editor` cacheGroupï¼Œäº§å‡º `radix-vendor-18d95e83f37c5ebc.js`â‰ˆ116â€¯KBã€`utils-vendor-08c20f37cdfbcb85.js`â‰ˆ55â€¯KBã€`lucide-9900c452d7fde9e5.js`â‰ˆ23â€¯KBã€‚
- âœ… ç§»é™¤æœªå¼•ç”¨çš„ shadcn ç»„ä»¶ `components/ui/chart.tsx`ã€`components/ui/slider.tsx`ã€‚
- âœ… `app/admin/blog/{create,page.tsx,edit/[id]/page.tsx,edit/[id]/edit-post-client.tsx}`ã€`app/feed/page.tsx` æ”¹ä¸º `next/dynamic` + Skeletonï¼Œå ä½åŠ è½½ `PostForm`ã€`CommentForm`ã€`CommentList`ã€‚
- ğŸ“Š `pnpm build` â†’ `PORT=3001 pnpm start` â†’ `CHROME_PATH=â€¦ npx lighthouse http://localhost:3001 --only-categories=performance --throttling-method=simulate --output=json --output-path=./lighthouse-phase1-bundle-optimized.json`ã€‚ç»“æœï¼šPerformance 90 / LCP 3.5s / TTI 3.5s / TBT 110â€¯ms / CLSâ‰ˆ0ã€‚
- âš ï¸ TTI ä»æœªä½äº 2.6sï¼Œç“¶é¢ˆé›†ä¸­åœ¨ Supabase / Feed Hero ä¸»çº¿ç¨‹ JSï¼ˆ`framework-515b0dâ€¦` + `8816.*` chunkï¼‰ï¼Œéœ€å°½å¿«æ¨è¿› Stageâ€¯Cï¼ˆå»¶è¿Ÿæ°´åˆ + å…³é”®è·¯å¾„é¢„åŠ è½½ï¼‰ã€‚

---

## ğŸ‰ æ€»ç»“

**æ€»å·¥æœŸ**ï¼š18-22å¤©ï¼ˆå•äººçº¦35å¤©ï¼Œå›¢é˜Ÿå¹¶è¡Œ18-22å¤©ï¼‰

**å…³é”®æˆåŠŸå› ç´ **ï¼š
1. âœ… ä¸¥æ ¼éµå®ˆ"ç©¿æ’æ‰§è¡Œ"ç­–ç•¥
2. âœ… ä¸¥æ ¼éµå®ˆ"ç»ä¸å›é€€mock"åŸåˆ™
3. âœ… æŒç»­éªŒè¯ï¼Œä¸å †ç§¯é—®é¢˜
4. âœ… æŒ‰èŠ‚ç‚¹æ¨è¿›ï¼Œäº¤ä»˜ç‰©æ˜ç¡®

**æœ€ç»ˆäº¤ä»˜**ï¼š
- ğŸš€ æ€§èƒ½æå‡5å€+
- ğŸ¯ åŠŸèƒ½å®Œæ•´åº¦ä»60%â†’95%
- ğŸ¨ è®¾è®¡ä¸€è‡´æ€§ä»60%â†’95%
- ğŸ“± ç§»åŠ¨ç«¯ä»ä¸å¯ç”¨â†’å®Œå…¨å¯ç”¨
- ğŸ” Mockæ•°æ®ä»40%â†’0%
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çœŸå®å¯ç”¨

---

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿè®©æˆ‘ä»¬ä»Phase 1 Day 1çš„å›¾ç‰‡ä¼˜åŒ–å¼€å§‹å§ï¼** ğŸš€
