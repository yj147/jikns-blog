# Chrome DevTools MCP 生产环境 E2E 测试计划

**目标站点**: https://jikns666.xyz **测试工具**: chrome-devtools MCP
(浏览器自动化) **测试类型**: 在环生产测试 (非破坏性) **标注约定**: ✅ 通过 /
❌ 失败 / ⏭ 跳过(阻塞)

---

## 一、测试原则

### 生产环境安全约束

1. **只读优先** - 优先测试读取类操作，写入操作需谨慎
2. **无残留数据** - 测试产生的数据（评论、动态等）需在测试后清理
3. **低频请求** - 避免触发速率限制，每个操作间隔 1-2 秒
4. **错误快速终止** - 遇到异常立即停止，保护生产环境

### 测试账号准备

- 需要一个测试用账号（非管理员）用于交互测试
- 管理后台测试需确认是否在生产环境执行

---

## 二、测试模块划分

### Phase 1: 公开页面可访问性 (无需登录)

| 序号                       | 测试场景 | 操作步骤                       | 验证点                          |
| -------------------------- | -------- | ------------------------------ | ------------------------------- |
| ✅ 1.1                     | 首页加载 | `navigate_page` → `/`          | 页面标题、Hero 区域、导航栏渲染 |
| ✅ 1.2 (需至少1篇文章)     | 博客列表 | `navigate_page` → `/blog`      | 文章卡片列表、分页组件          |
| ✅ 1.3 (使用 E2E 测试文章) | 博客详情 | 点击任意文章卡片               | 标题、内容、目录、评论区        |
| ✅ 1.4                     | 搜索页面 | `navigate_page` → `/search`    | 搜索框、过滤器                  |
| ✅ 1.5                     | 标签页面 | `navigate_page` → `/tags`      | 标签列表展示                    |
| ✅ 1.6                     | 档案页面 | `navigate_page` → `/archive`   | 年月导航、文章列表              |
| ✅ 1.7                     | 静态页面 | `/about`, `/privacy`, `/terms` | 内容正常渲染                    |
| ✅ 1.8                     | 订阅页面 | `navigate_page` → `/subscribe` | 订阅表单渲染                    |

**工具使用**:

```
mcp__chrome-devtools__navigate_page → 导航
mcp__chrome-devtools__take_snapshot → 验证页面结构
mcp__chrome-devtools__list_console_messages → 检查控制台错误
```

---

### Phase 2: 搜索功能完整性

| 序号   | 测试场景   | 操作步骤          | 验证点             |
| ------ | ---------- | ----------------- | ------------------ |
| ✅ 2.1 | 关键词搜索 | 输入搜索词 → 提交 | 结果列表、高亮匹配 |
| ✅ 2.2 | 标签过滤   | 选择标签过滤器    | 结果仅包含该标签   |
| ✅ 2.3 | 排序功能   | 切换排序方式      | 结果顺序变化       |
| ✅ 2.4 | 空结果处理 | 搜索不存在的词    | 空状态提示         |
| ✅ 2.5 | 搜索建议   | 输入部分词        | 下拉建议列表       |

**工具使用**:

```
mcp__chrome-devtools__fill → 输入搜索词
mcp__chrome-devtools__click → 点击搜索按钮/过滤器
mcp__chrome-devtools__take_snapshot → 验证结果
```

---

### Phase 2A: 标签功能详细测试

| 序号    | 测试场景     | 操作步骤                                           | 验证点                            |
| ------- | ------------ | -------------------------------------------------- | --------------------------------- |
| ✅ 2A.1 | 标签列表页   | 1. `navigate_page` → `/tags`<br>2. `take_snapshot` | 标签网格/列表、使用次数、热度排序 |
| ✅ 2A.2 | 标签搜索     | 1. `fill` 标签搜索框<br>2. `take_snapshot`         | 过滤后的标签列表                  |
| ✅ 2A.3 | 标签详情页   | 1. `click` 某个标签<br>2. 进入 `/tags/[slug]`      | 标签描述、关联文章列表            |
| ✅ 2A.4 | 标签文章分页 | 1. 在标签详情页翻页<br>2. `take_snapshot`          | 分页正确、文章列表更新            |
| ✅ 2A.5 | 标签排序     | 1. 切换排序方式（最新/热门）<br>2. `take_snapshot` | 文章顺序变化                      |
| ✅ 2A.6 | 空标签处理   | 1. 访问无文章的标签                                | 显示空状态提示                    |

---

### Phase 2B: 档案功能详细测试

| 序号    | 测试场景   | 操作步骤                                               | 验证点               |
| ------- | ---------- | ------------------------------------------------------ | -------------------- |
| ✅ 2B.1 | 档案首页   | 1. `navigate_page` → `/archive`<br>2. `take_snapshot`  | 年份列表、统计数据   |
| ✅ 2B.2 | 年份导航   | 1. `click` 某年份<br>2. 进入 `/archive/[year]`         | 该年月份列表、文章数 |
| ✅ 2B.3 | 月份导航   | 1. `click` 某月份<br>2. 进入 `/archive/[year]/[month]` | 该月文章列表         |
| ✅ 2B.4 | 档案搜索   | 1. `fill` 档案搜索框<br>2. `take_snapshot`             | 搜索结果匹配         |
| ✅ 2B.5 | 时间线视图 | 1. 切换到时间线视图<br>2. `take_snapshot`              | 时间线正确渲染       |
| ✅ 2B.6 | 分块加载   | 1. 滚动到底部<br>2. `wait_for` 新内容                  | 懒加载更多文章       |
| ✅ 2B.7 | 档案统计   | 1. 查看统计面板                                        | 文章总数、年月分布   |

---

### Phase 3: 用户认证流程

| 序号   | 测试场景     | 操作步骤                   | 验证点               |
| ------ | ------------ | -------------------------- | -------------------- |
| ✅ 3.1 | 登录页访问   | `navigate_page` → `/login` | 登录表单、OAuth 按钮 |
| ✅ 3.2 | 未登录重定向 | 访问 `/profile`            | 重定向到登录页       |
| ✅ 3.3 | 登录成功     | 使用测试账号登录           | 导航栏显示用户信息   |
| ✅ 3.4 | 会话持久化   | 刷新页面                   | 保持登录状态         |
| ✅ 3.5 | 登出流程     | 点击登出                   | 清除会话、重定向     |

**工具使用**:

```
mcp__chrome-devtools__fill_form → 填写登录表单
mcp__chrome-devtools__click → 提交
mcp__chrome-devtools__wait_for → 等待登录完成
```

---

### Phase 4: 博客交互功能 (需登录)

#### 4A. 博客点赞

| 序号    | 测试场景       | 操作步骤                                                                                             | 验证点                       |
| ------- | -------------- | ---------------------------------------------------------------------------------------------------- | ---------------------------- |
| ✅ 4A.1 | 点赞文章       | 1. 访问文章详情页<br>2. `take_snapshot` 获取点赞按钮 uid<br>3. 记录当前点赞数<br>4. `click` 点赞按钮 | 按钮变为"已点赞"状态、计数+1 |
| ✅ 4A.2 | 取消点赞       | 1. 再次 `click` 点赞按钮<br>2. `take_snapshot` 验证                                                  | 按钮恢复未点赞状态、计数-1   |
| ✅ 4A.3 | 点赞状态持久化 | 1. 点赞后刷新页面<br>2. `take_snapshot`                                                              | 点赞状态保持                 |
| ✅ 4A.4 | 未登录点赞     | 1. 登出<br>2. 访问文章<br>3. `click` 点赞按钮                                                        | 提示登录或跳转登录页         |

#### 4B. 博客评论

| 序号    | 测试场景     | 操作步骤                                                                                                                                                        | 验证点                           |
| ------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------- |
| ✅ 4B.1 | 发表评论     | 1. 访问文章详情页<br>2. `take_snapshot` 获取评论输入框 uid<br>3. `fill` 输入评论内容 "[E2E-TEST] 测试评论"<br>4. `click` 提交按钮<br>5. `wait_for` 等待评论出现 | 评论出现在列表、显示用户名和时间 |
| ✅ 4B.2 | 回复评论     | 1. `click` 某条评论的回复按钮<br>2. `fill` 输入回复内容<br>3. `click` 提交                                                                                      | 回复嵌套显示在父评论下           |
| ✅ 4B.3 | 删除评论     | 1. `click` 自己评论的删除按钮<br>2. `click` 确认删除<br>3. `take_snapshot`                                                                                      | 评论从列表移除                   |
| ✅ 4B.4 | 空评论提交   | 1. 不输入内容直接提交                                                                                                                                           | 显示错误提示、禁止提交           |
| ✅ 4B.5 | 评论字数限制 | 1. 输入超长内容                                                                                                                                                 | 显示字数限制提示                 |

#### 4C. 博客收藏

| 序号    | 测试场景       | 操作步骤                                                        | 验证点                 |
| ------- | -------------- | --------------------------------------------------------------- | ---------------------- |
| ✅ 4C.1 | 收藏文章       | 1. 访问文章详情页<br>2. `click` 收藏按钮                        | 按钮变为"已收藏"状态   |
| ✅ 4C.2 | 验证收藏列表   | 1. `navigate_page` → `/profile/bookmarks`<br>2. `take_snapshot` | 刚收藏的文章出现在列表 |
| ✅ 4C.3 | 取消收藏       | 1. 返回文章详情<br>2. `click` 收藏按钮                          | 按钮恢复未收藏状态     |
| ✅ 4C.4 | 从列表取消收藏 | 1. 在收藏列表点击取消收藏<br>2. `take_snapshot`                 | 文章从收藏列表移除     |

#### 4D. 用户关注

| 序号    | 测试场景         | 操作步骤                                                             | 验证点               |
| ------- | ---------------- | -------------------------------------------------------------------- | -------------------- |
| ✅ 4D.1 | 关注用户         | 1. 访问他人资料页<br>2. `click` 关注按钮                             | 按钮变为"已关注"     |
| ✅ 4D.2 | 验证关注列表     | 1. `navigate_page` → `/profile/[id]/following`<br>2. `take_snapshot` | 被关注用户出现在列表 |
| ✅ 4D.3 | 取消关注         | 1. 返回用户资料<br>2. `click` 已关注按钮                             | 按钮恢复"关注"       |
| ✅ 4D.4 | 自己不能关注自己 | 1. 访问自己的资料页                                                  | 不显示关注按钮       |

**数据清理规则**:

- 所有测试评论以 `[E2E-TEST]` 开头，便于识别和清理
- 每个交互测试结束后恢复原状态（取消点赞/收藏/关注）
- 删除所有测试产生的评论

---

### Phase 5: 用户资料与设置

| 序号   | 测试场景 | 操作步骤                      | 验证点                 |
| ------ | -------- | ----------------------------- | ---------------------- |
| ✅ 5.1 | 个人资料 | `navigate_page` → `/profile`  | 头像、昵称、简介、统计 |
| ✅ 5.2 | 他人资料 | 访问任意用户资料              | 关注按钮、动态列表     |
| ✅ 5.3 | 设置页面 | `navigate_page` → `/settings` | 表单渲染、保存按钮     |
| ✅ 5.4 | 书签列表 | `/profile/bookmarks`          | 收藏的文章列表         |
| ✅ 5.5 | 关注列表 | `/profile/[id]/following`     | 关注用户列表           |
| ✅ 5.6 | 粉丝列表 | `/profile/[id]/followers`     | 粉丝列表               |

---

### Phase 6: 动态与信息流

#### 6A. 动态浏览

| 序号    | 测试场景 | 操作步骤                                                 | 验证点                           |
| ------- | -------- | -------------------------------------------------------- | -------------------------------- |
| ✅ 6A.1 | 动态列表 | 1. `navigate_page` → `/activities`<br>2. `take_snapshot` | 动态卡片列表、用户头像、内容预览 |
| ✅ 6A.2 | 信息流   | 1. `navigate_page` → `/feed`<br>2. `take_snapshot`       | 关注者动态、按时间排序           |
| ✅ 6A.3 | 动态过滤 | 1. `click` 过滤器选项<br>2. `take_snapshot`              | 结果按条件筛选                   |
| ✅ 6A.4 | 动态详情 | 1. `click` 动态卡片<br>2. `take_snapshot`                | 完整内容、评论区、交互按钮       |
| ✅ 6A.5 | 图片动态 | 1. 找到带图片的动态<br>2. `click` 图片                   | 图片预览/放大                    |

#### 6B. 动态点赞

| 序号    | 测试场景   | 操作步骤                                                                                                   | 验证点                       |
| ------- | ---------- | ---------------------------------------------------------------------------------------------------------- | ---------------------------- |
| ✅ 6B.1 | 点赞动态   | 1. 访问动态详情页或列表<br>2. `take_snapshot` 获取点赞按钮 uid<br>3. 记录当前点赞数<br>4. `click` 点赞按钮 | 按钮变为"已点赞"状态、计数+1 |
| ✅ 6B.2 | 取消点赞   | 1. 再次 `click` 点赞按钮<br>2. `take_snapshot`                                                             | 按钮恢复未点赞状态、计数-1   |
| ✅ 6B.3 | 列表页点赞 | 1. 在动态列表页直接点赞<br>2. 进入详情页验证                                                               | 状态同步正确                 |
| ✅ 6B.4 | 点赞后通知 | 1. 点赞他人动态<br>2. 检查对方通知（如有权限）                                                             | 被点赞者收到通知             |

#### 6C. 动态评论

| 序号    | 测试场景  | 操作步骤                                                                                                                                        | 验证点                            |
| ------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| ✅ 6C.1 | 发表评论  | 1. 访问动态详情页<br>2. `take_snapshot` 获取评论输入框<br>3. `fill` 输入 "[E2E-TEST] 动态评论"<br>4. `click` 提交<br>5. `wait_for` 等待评论出现 | 评论显示在列表                    |
| ✅ 6C.2 | 回复评论  | 1. `click` 评论的回复按钮<br>2. `fill` 输入回复内容<br>3. `click` 提交                                                                          | 回复嵌套显示                      |
| ✅ 6C.3 | 删除评论  | 1. `click` 自己评论的删除按钮<br>2. 确认删除                                                                                                    | 评论移除                          |
| ✅ 6C.4 | @提及用户 | 1. 评论中输入 "@用户名"<br>2. 检查自动补全<br>3. 提交评论                                                                                       | @提及格式化显示、被提及者收到通知 |

#### 6D. 动态收藏

| 序号    | 测试场景 | 操作步骤                                 | 验证点               |
| ------- | -------- | ---------------------------------------- | -------------------- |
| ✅ 6D.1 | 收藏动态 | 1. 访问动态详情页<br>2. `click` 收藏按钮 | 按钮变为"已收藏"状态 |
| ✅ 6D.2 | 取消收藏 | 1. 再次 `click` 收藏按钮                 | 按钮恢复未收藏状态   |

#### 6E. 发布动态 (谨慎执行)

> ⚠️ 生产环境发布动态需谨慎，建议仅验证表单可用性

| 序号    | 测试场景 | 操作步骤                                                                 | 验证点               |
| ------- | -------- | ------------------------------------------------------------------------ | -------------------- |
| ✅ 6E.1 | 发布表单 | 1. `click` 发布动态按钮<br>2. `take_snapshot`                            | 表单弹出、输入框可用 |
| ✅ 6E.2 | 发布动态 | 1. `fill` 输入 "[E2E-TEST] 测试动态"<br>2. `click` 发布<br>3. `wait_for` | 动态出现在列表       |
| ✅ 6E.3 | 删除动态 | 1. `click` 自己动态的删除按钮<br>2. 确认删除                             | 动态移除（清理数据） |
| ✅ 6E.4 | 编辑动态 | 1. `click` 编辑按钮<br>2. 修改内容<br>3. 保存                            | 内容更新             |

**数据清理规则**:

- 所有测试动态内容以 `[E2E-TEST]` 开头
- 所有测试评论以 `[E2E-TEST]` 开头
- 测试结束后删除所有测试动态和评论
- 恢复点赞/收藏状态

---

### Phase 7: 通知系统

| 序号   | 测试场景 | 操作步骤                           | 验证点           |
| ------ | -------- | ---------------------------------- | ---------------- |
| ✅ 7.1 | 通知入口 | 点击通知铃铛                       | 通知列表弹出     |
| ✅ 7.2 | 通知页面 | `navigate_page` → `/notifications` | 通知列表         |
| ✅ 7.3 | 通知跳转 | 点击通知项                         | 跳转到相关内容   |
| ✅ 7.4 | 标记已读 | `click` 标记已读按钮               | 通知状态变化     |
| ✅ 7.5 | 批量操作 | 全部标记已读                       | 所有通知变为已读 |

---

### Phase 7A: 邮件订阅流程

| 序号    | 测试场景   | 操作步骤                                                            | 验证点                     |
| ------- | ---------- | ------------------------------------------------------------------- | -------------------------- |
| ✅ 7A.1 | 订阅页面   | 1. `navigate_page` → `/subscribe`<br>2. `take_snapshot`             | 订阅表单、输入框、提交按钮 |
| ✅ 7A.2 | 提交订阅   | 1. `fill` 输入测试邮箱<br>2. `click` 提交<br>3. `wait_for` 成功提示 | 显示"请查收验证邮件"       |
| ✅ 7A.3 | 重复订阅   | 1. 再次输入相同邮箱<br>2. 提交                                      | 提示"已订阅"或"待验证"     |
| ✅ 7A.4 | 无效邮箱   | 1. 输入无效格式邮箱<br>2. 提交                                      | 显示格式错误提示           |
| ✅ 7A.5 | 文章内订阅 | 1. 访问文章详情页<br>2. 找到订阅表单<br>3. `take_snapshot`          | 表单可用、与独立页一致     |
| ✅ 7A.6 | 取消订阅页 | 1. `navigate_page` → `/unsubscribe`<br>2. `take_snapshot`           | 取消订阅表单渲染           |
| ✅ 7A.7 | 执行取消   | 1. `fill` 输入邮箱<br>2. `click` 确认取消                           | 显示取消成功提示           |

**注意**:

- 测试邮箱使用 `e2e-test-*@example.com` 格式
- 验证邮件链接测试需要访问邮箱（可能需跳过）

---

### Phase 8: 管理后台 (需管理员权限)

#### 8A. 后台入口与仪表板

| 序号    | 测试场景   | 操作步骤                                            | 验证点               |
| ------- | ---------- | --------------------------------------------------- | -------------------- |
| ✅ 8A.1 | 后台入口   | 1. `navigate_page` → `/admin`<br>2. `take_snapshot` | 仪表板渲染、统计卡片 |
| ✅ 8A.2 | 权限验证   | 1. 用普通用户访问 `/admin`                          | 403 或重定向         |
| ✅ 8A.3 | 侧边栏导航 | 1. `take_snapshot` 侧边栏<br>2. `click` 各菜单项    | 导航正常、高亮当前   |

#### 8B. 文章管理完整流程

| 序号     | 测试场景     | 操作步骤                                                                  | 验证点                       |
| -------- | ------------ | ------------------------------------------------------------------------- | ---------------------------- |
| ✅ 8B.1  | 文章列表     | 1. `navigate_page` → `/admin/blog`<br>2. `take_snapshot`                  | 文章列表、状态标签、操作按钮 |
| ✅ 8B.2  | 文章筛选     | 1. 选择发布状态过滤器<br>2. `take_snapshot`                               | 列表按状态筛选               |
| ✅ 8B.3  | 文章搜索     | 1. `fill` 搜索框<br>2. `take_snapshot`                                    | 搜索结果匹配                 |
| ✅ 8B.4  | 创建文章页   | 1. `click` 新建按钮<br>2. 进入 `/admin/blog/create`<br>3. `take_snapshot` | 编辑表单、Markdown编辑器     |
| ✅ 8B.5  | 填写基本信息 | 1. `fill` 标题 "[E2E-TEST] 测试文章"<br>2. `fill` slug<br>3. `fill` 摘要  | 字段正确接受输入             |
| ✅ 8B.6  | Markdown编辑 | 1. `fill` Markdown内容<br>2. 查看预览                                     | 预览正确渲染                 |
| ✅ 8B.7  | 添加标签     | 1. `click` 标签输入框<br>2. 选择或创建标签                                | 标签添加成功                 |
| ✅ 8B.8  | 封面图上传   | 1. `click` 上传按钮<br>2. 选择图片                                        | 图片预览显示                 |
| ✅ 8B.9  | 自动保存     | 1. 编辑内容后等待<br>2. 检查保存状态                                      | 显示"已自动保存"             |
| ✅ 8B.10 | 保存草稿     | 1. `click` 保存草稿按钮<br>2. `wait_for` 成功提示                         | 文章保存、状态为草稿         |
| ✅ 8B.11 | 发布文章     | 1. `click` 发布按钮<br>2. `wait_for` 成功提示                             | 文章发布、状态变更           |
| ✅ 8B.12 | 编辑已有文章 | 1. 返回列表<br>2. `click` 编辑按钮<br>3. 进入 `/admin/blog/edit/[id]`     | 加载已有内容                 |
| ✅ 8B.13 | 修改并保存   | 1. 修改标题<br>2. `click` 保存                                            | 更新成功                     |
| ✅ 8B.14 | 取消发布     | 1. `click` 取消发布按钮                                                   | 状态变为草稿                 |
| ✅ 8B.15 | 删除文章     | 1. `click` 删除按钮<br>2. 确认删除                                        | 文章移除（清理测试数据）     |
| ✅ 8B.16 | 预览文章     | 1. `click` 预览按钮                                                       | 新标签页打开预览             |

#### 8C. 标签管理

| 序号    | 测试场景     | 操作步骤                                                 | 验证点             |
| ------- | ------------ | -------------------------------------------------------- | ------------------ |
| ✅ 8C.1 | 标签列表     | 1. `navigate_page` → `/admin/tags`<br>2. `take_snapshot` | 标签列表、使用次数 |
| ✅ 8C.2 | 候选标签审核 | 1. 查看候选标签区<br>2. `click` 审核通过/拒绝            | 状态更新           |
| ✅ 8C.3 | 编辑标签     | 1. `click` 编辑按钮<br>2. 修改名称/描述<br>3. 保存       | 标签更新           |

#### 8D. 动态管理 (Feeds)

| 序号     | 测试场景 | 操作步骤                                                      | 验证点                           |
| -------- | -------- | ------------------------------------------------------------- | -------------------------------- |
| ✅ 8D.1  | 动态列表 | 1. `navigate_page` → `/admin/feeds`<br>2. `take_snapshot`     | 动态列表、状态标签、批量操作按钮 |
| ✅ 8D.2  | 动态筛选 | 1. 选择过滤器（全部/已隐藏/已置顶）<br>2. `take_snapshot`     | 列表按条件筛选                   |
| ✅ 8D.3  | 动态搜索 | 1. `fill` 搜索框<br>2. `take_snapshot`                        | 搜索结果匹配                     |
| ✅ 8D.4  | 查看详情 | 1. `click` 动态行<br>2. `take_snapshot` 详情面板              | 动态内容、作者信息、统计数据     |
| ✅ 8D.5  | 隐藏动态 | 1. 选中动态<br>2. `click` 隐藏按钮<br>3. 确认操作             | 状态变为"已隐藏"                 |
| ✅ 8D.6  | 取消隐藏 | 1. 选中已隐藏动态<br>2. `click` 取消隐藏                      | 状态恢复正常                     |
| ✅ 8D.7  | 置顶动态 | 1. 选中动态<br>2. `click` 置顶按钮                            | 状态变为"已置顶"                 |
| ✅ 8D.8  | 取消置顶 | 1. 选中已置顶动态<br>2. `click` 取消置顶                      | 置顶标记移除                     |
| ✅ 8D.9  | 删除动态 | 1. 选中动态<br>2. `click` 删除按钮<br>3. 确认删除             | 动态从列表移除                   |
| ✅ 8D.10 | 批量操作 | 1. 勾选多个动态<br>2. `click` 批量操作按钮<br>3. 选择操作类型 | 批量操作成功                     |

#### 8E. 用户管理

| 序号    | 测试场景 | 操作步骤                                                  | 验证点             |
| ------- | -------- | --------------------------------------------------------- | ------------------ |
| ✅ 8E.1 | 用户列表 | 1. `navigate_page` → `/admin/users`<br>2. `take_snapshot` | 用户卡片、角色标识 |
| ✅ 8E.2 | 用户搜索 | 1. `fill` 搜索框<br>2. `take_snapshot`                    | 结果匹配           |
| ✅ 8E.3 | 用户详情 | 1. `click` 用户卡片                                       | 详细信息、操作按钮 |
| ✅ 8E.4 | 禁用用户 | 1. `click` 禁用按钮<br>2. 确认操作                        | 用户状态变为禁用   |
| ✅ 8E.5 | 解除禁用 | 1. `click` 解除禁用                                       | 用户状态恢复       |
| ✅ 8E.6 | 修改角色 | 1. `click` 修改角色<br>2. 选择新角色                      | 角色更新           |

#### 8F. 监控与设置

| 序号    | 测试场景 | 操作步骤                                                       | 验证点               |
| ------- | -------- | -------------------------------------------------------------- | -------------------- |
| ✅ 8F.1 | 监控页面 | 1. `navigate_page` → `/admin/monitoring`<br>2. `take_snapshot` | 指标图表、时间选择器 |
| ✅ 8F.2 | 时间范围 | 1. 切换时间范围<br>2. `take_snapshot`                          | 图表数据更新         |
| ✅ 8F.3 | 系统设置 | 1. `navigate_page` → `/admin/settings`<br>2. `take_snapshot`   | 配置表单             |

**数据清理规则**:

- 测试文章标题以 `[E2E-TEST]` 开头
- 测试完成后删除所有测试文章

---

### Phase 9: 性能与错误监控

| 序号                                             | 测试场景   | 操作步骤        | 验证点                             |
| ------------------------------------------------ | ---------- | --------------- | ---------------------------------- |
| ✅ 9.1                                           | 控制台错误 | 遍历所有页面    | 无 JS 错误                         |
| ✅ 9.2                                           | 网络请求   | 检查失败请求    | 无 4xx/5xx                         |
| ✅ 9.3 (home LCP 323ms, CLS 0.00；feed INP 32ms) | 性能追踪   | Core Web Vitals | LCP < 2.5s, INP < 200ms, CLS < 0.1 |
| ✅ 9.4                                           | 响应式验证 | 调整视口大小    | 移动端适配                         |

**工具使用**:

```
mcp__chrome-devtools__list_console_messages → 控制台错误
mcp__chrome-devtools__list_network_requests → 网络状态
mcp__chrome-devtools__performance_start_trace → 性能分析
mcp__chrome-devtools__resize_page → 响应式测试
```

---

## 三、执行顺序与依赖

```
Phase 1 (公开页面)       ← 无依赖，首先执行 (8 场景)
    ↓
Phase 2 (搜索功能)       ← 依赖页面可访问 (5 场景)
    ↓
Phase 2A (标签功能)      ← 依赖页面可访问 (6 场景)
    ↓
Phase 2B (档案功能)      ← 依赖页面可访问 (7 场景)
    ↓
Phase 3 (认证流程)       ← 准备登录状态 (5 场景)
    ↓
Phase 4 (博客交互)       ← 需要登录状态 (17 场景)
  ├── 4A 点赞 (4)
  ├── 4B 评论 (5)
  ├── 4C 收藏 (4)
  └── 4D 关注 (4)
    ↓
Phase 5 (用户资料)       ← 需要登录状态 (6 场景)
    ↓
Phase 6 (动态交互)       ← 需要登录状态 (19 场景)
  ├── 6A 浏览 (5)
  ├── 6B 点赞 (4)
  ├── 6C 评论 (4)
  ├── 6D 收藏 (2)
  └── 6E 发布 (4)
    ↓
Phase 7 (通知系统)       ← 需要登录状态 (5 场景)
    ↓
Phase 7A (邮件订阅)      ← 可无需登录 (7 场景)
    ↓
Phase 8 (管理后台)       ← 需要管理员权限 (41 场景)
  ├── 8A 入口与仪表板 (3)
  ├── 8B 文章管理 (16)
  ├── 8C 标签管理 (3)
  ├── 8D 动态管理 (10)
  ├── 8E 用户管理 (6)
  └── 8F 监控与设置 (3)
    ↓
Phase 9 (性能监控)       ← 全局检查 (4 场景)
```

**场景总计**: 130 个测试场景

---

## 四、测试报告模板

每个 Phase 完成后输出:

```markdown
### Phase X: [模块名]

| 场景 | 状态  | 耗时 | 备注     |
| ---- | ----- | ---- | -------- |
| X.1  | ✅/❌ | Xs   | 异常描述 |
| X.2  | ✅/❌ | Xs   | ...      |

**控制台错误**: 无 / [错误列表] **网络异常**: 无 / [失败请求列表] **截图**:
[关键页面截图路径]
```

---

## 五、关键 MCP 工具速查

| 操作   | 工具                      | 用途                     |
| ------ | ------------------------- | ------------------------ |
| 导航   | `navigate_page`           | 访问 URL                 |
| 快照   | `take_snapshot`           | 获取页面结构 (a11y tree) |
| 截图   | `take_screenshot`         | 视觉记录                 |
| 点击   | `click`                   | 交互操作                 |
| 输入   | `fill` / `fill_form`      | 表单填写                 |
| 等待   | `wait_for`                | 等待文本出现             |
| 按键   | `press_key`               | 键盘操作                 |
| 控制台 | `list_console_messages`   | 错误检测                 |
| 网络   | `list_network_requests`   | 请求监控                 |
| 性能   | `performance_start_trace` | CWV 分析                 |
| 视口   | `resize_page`             | 响应式测试               |

---

## 六、确认的执行参数

| 项目     | 决策                          |
| -------- | ----------------------------- |
| 测试账号 | GitHub OAuth 登录             |
| 管理后台 | 完整测试                      |
| 执行范围 | 全量执行 (12 Phase, 130 场景) |

---

## 七、GitHub OAuth 登录流程 (关键)

由于使用 GitHub OAuth，登录流程需要特殊处理：

### 步骤

1. `navigate_page` → `https://jikns666.xyz/login`
2. `take_snapshot` → 获取 GitHub OAuth 按钮的 uid
3. `click` → 点击 GitHub 登录按钮
4. **进入 GitHub 授权页面** (外部域名)
   - 如果已授权过，可能自动跳转回
   - 如果首次授权，需要在 GitHub 页面操作
5. `wait_for` → 等待跳转回站点
6. `take_snapshot` → 验证登录成功（导航栏显示用户信息）

### 注意事项

- GitHub OAuth 可能需要用户手动干预（如 2FA）
- 建议使用已授权过的 GitHub 账号，减少交互步骤
- 若 GitHub 需要登录，需切换到 GitHub 域名进行操作

---

## 八、执行脚本模板

每个 Phase 的执行遵循以下模式：

```
1. navigate_page → 目标URL
2. take_snapshot → 获取页面结构
3. list_console_messages → 检查错误
4. [交互操作: click/fill/press_key]
5. wait_for → 等待结果
6. take_snapshot → 验证结果
7. take_screenshot → 保存视觉记录
```

### 错误处理

- 控制台出现 error 级别日志 → 记录并继续
- 页面加载超时 → 重试一次
- 网络请求 5xx → 标记为关键失败

---

## 九、预期产出

1. **测试报告** - Markdown 格式，每个场景的通过/失败状态
2. **截图集合** - 关键页面和功能的视觉记录
3. **性能报告** - Core Web Vitals 数据
4. **问题清单** - 发现的 bug 和异常列表

---

## 十、数据清理确认（生产环境）

- ✅ (2025-12-30) 已删除所有标题以 `[E2E-TEST]` 开头的测试文章
- ✅ (2025-12-30) 已删除所有内容以 `[E2E-TEST]` 开头的测试动态
- ✅ (2025-12-30) 测试产生的评论/回复已清理（按计划规则）
